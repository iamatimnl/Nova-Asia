<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Nova Asia Bestellen</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
    background: #f5f5f7;
    color: #1c1c1e;
    padding-top: 60px;
    text-align: center;
  }

  :root {
    --apple-blue: #007aff;
  }
    /* Hide horizontal scroll bar in all modern browsers */
  .navbar-container::-webkit-scrollbar {
    display: none;
  }
  .navbar-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .navbar-container {
    position: sticky;
    top: 0;
    background-color: white;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-bottom: 1px solid #ccc;
    z-index: 999;
  }

  .navbar {
    display: flex;
    flex-direction: row;
    white-space: nowrap;
    position: relative;
    scroll-behavior: auto;
  }

  .navbar a {
    flex: 0 0 auto;
    padding: 14px 20px;
    color: var(--apple-blue);
    text-decoration: none;
    font-weight: bold;
    border-radius: 24px;
    transition: all 0.3s ease;
    position: relative;
    z-index: 2;
  }

  .navbar a.active {
    color: white;
  }

  .indicator {
    position: absolute;
    height: 32px;
    background-color: var(--apple-blue);
    border-radius: 24px;
    bottom: 8px;
    z-index: 1;
    transition: all 0.3s ease;
    will-change: transform;
  }

  .navbar::after {
    content: "";
    flex: 0 0 50vw;
  }

  section {
    height: auto;
    padding: 40px 20px;
    box-sizing: border-box;
    border-bottom: 1px solid #ccc;
    border-radius: 16px;
    background: #ffffff;
    margin-bottom: 20px;
  }

  section:nth-child(even) {
    background: #e9efff;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p {
    text-align: center;
  }

  .menu-item {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    padding: 16px;
    margin-bottom: 12px;
    border-radius: 16px;
    position: relative;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  }

  .menu-item img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 12px;
    flex-shrink: 0;
  }

  .menu-item span {
    font-size: 1rem;
    white-space: normal;
    word-break: break-word;
    position: relative;
    z-index: 1;
  }

  .menu-item select,
  .menu-item button {
    margin-top: 8px;
    padding: 6px 8px;
    font-size: 0.85rem;
    height: 36px;
    border-radius: 10px;
    border: 1px solid #ccc;
  }

  .menu-item button {
    background: #007aff;
    color: white;
    border: none;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .menu-item button:hover {
    background: #005fcc;
  }

  @media (max-width: 600px) {
    .menu-item {
      flex-direction: column;
      align-items: flex-start;
    }

    .menu-item select,
    .menu-item button {
      width: 100%;
    }
  }
.add-button {
  background: #007aff;
  color: white;
}

.add-button:hover {
  background: #005fcc;
}

.remove-button {
  background: #ff3b30;
  color: white;
}

.remove-button:hover {
  background: #c1271d;
}


.cart-section.mobile-visible {
  right: 0 !important;
  display: block !important;
}


@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
  .cart-section {
    position: fixed;
    right: 20px;
    top: 80px;
    width: 300px;
    max-height: 80vh;
    overflow-y: auto;
    z-index: 1000;
  }
}

@media (max-width: 767px) {
  .cart-section {
    display: none;
  }

  #cart-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #007aff;
    color: white;
    border: none;
    border-radius: 12px;
    width: 56px;
    height: 56px;
    font-size: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    z-index: 999;
  }

  .cart-section.mobile-visible {
  position: fixed;
  top: 0;
  right: 0;
  width: 90%;
  height: 100%;
  background: #ffffff;
  border-radius: 16px 0 0 16px;
  padding: 20px;
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
  transition: right 0.3s ease-in-out;
  z-index: 1000;
  } 


}

#closeCartBtn {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  background: #ffffff;
  color: #333;
  font-size: 22px;
  font-weight: bold;
  border: 1px solid #ccc;
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  z-index: 1010;

  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  padding: 0;
}
#cart-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  background: #007aff;
  color: white;
  font-size: 28px;
  font-weight: 600;
  border: none;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  line-height: 1;
  cursor: pointer;
  z-index: 999;
}


@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
}
@media (min-width: 768px) {
  #closeCartBtn {
    display: none;
  }
}
#cart-badge {
  background: red;
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
  position: absolute;
  top: -5px;
  right: -5px;
  display: inline-block;
}

.delivery-options {
  max-width: 500px;
  margin: auto;
  padding: 24px;
  background: white;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  text-align: left;
}

.delivery-options h2 {
  text-align: center;
  font-size: 1.5rem;
  margin-bottom: 24px;
}

.segmented-control {
  display: flex;
  justify-content: center;
  background: #e6e6ea;
  border-radius: 999px;
  padding: 4px;
  margin-bottom: 20px;
  position: relative;
}

.segmented-control input[type="radio"] {
  display: none;
}

.segmented-control label {
  flex: 1;
  text-align: center;
  padding: 10px 0;
  font-weight: 500;
  cursor: pointer;
  border-radius: 999px;
  z-index: 2;
  position: relative;
  transition: color 0.3s ease;
}

.segmented-control .slider {
  position: absolute;
  top: 4px;
  bottom: 4px;
  left: 4px;
  width: 50%;
  background-color: var(--apple-blue);
  border-radius: 999px;
  transition: transform 0.3s ease;
  z-index: 1;
}

input#bezorgen:checked ~ label[for="bezorgen"],
input#afhalen:checked ~ label[for="afhalen"] {
  color: white;
}

input#bezorgen:checked ~ .slider {
  transform: translateX(100%);
}

.delivery-options label {
  display: block;
  margin-top: 12px;
  margin-bottom: 4px;
  font-weight: 500;
  font-size: 0.95rem;
}

.delivery-options input,
.delivery-options select {
  width: 100%;
  min-height: 44px;
  padding: 10px 12px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 12px;
  box-sizing: border-box;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-color: white;
  background-image: url('data:image/svg+xml;utf8,<svg fill="%23666" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px 16px;
  padding-right: 36px;
}


.delivery-options input:focus,
.delivery-options select:focus {
  border-color: var(--apple-blue);
  outline: none;
}

.hidden {
  display: none;
}

@media (max-width: 600px) {
  .delivery-options {
    padding: 16px;
  }

  .delivery-options h2 {
    font-size: 1.25rem;
  }
}








</style>
</head>
<body>
<div class="navbar-container" id="navbar-container">
    <nav class="navbar" id="navbar">
      <a href="#delivery-options">delivery-options</a>
      <a href="#checkbox-group">checkbox-group</a>
      <a href="#bento">Bento Box</a>
      <a href="#sushi">Sushi Rolls</a>
      <a href="#bubble">Bubble Tea</a>
      <a href="#dessert">Dessert</a>
      <a href="#snack">Snack</a>
      <a href="#vegan">Vegan</a>
      <div class="indicator" id="indicator"></div>
    </nav>
  </div>


<h1>Nova Asia Online Bestellen</h1>
<section id="delivery-options">
  <div class="delivery-options">
    <h2>Kies uw bestelmethode</h2>
    <div class="segmented-control">
      <input checked id="afhalen" name="orderType" onchange="toggleOrderType()" type="radio" value="afhalen" />
      <label for="afhalen">Afhalen</label>
      <input id="bezorgen" name="orderType" onchange="toggleOrderType()" type="radio" value="bezorgen" />
      <label for="bezorgen">Bezorgen</label>
      <div class="slider"></div>
    </div>

    <div class="info-text" id="locationInfo" style="white-space: pre-line; font-size: 0.95rem; margin-top: 8px;"></div>

    <!-- Afhalen 表单 -->
    <div id="afhalenFields">
      <label>Naam:</label>
      <input id="pickupName" type="text" />
      <label>Telefoonnummer:</label>
      <input id="pickupPhone" type="tel" />
      <label>Tijd van afhalen:</label>
      <input id="pickupTime" type="time" />
      <label>Betaalmethode:</label>
      <select id="pickupPayment">
        <option value="winkel">In de winkel</option>
        <option value="online">Online betaling</option>
      </select>
    </div>

    <!-- Bezorgen 表单（默认隐藏） -->
    <div class="hidden" id="bezorgenFields">
      <label>Naam:</label>
      <input id="deliveryName" type="text" />
      <label>Telefoonnummer:</label>
      <input id="deliveryPhone" type="tel" />
      <label>Adres:</label>
      <input id="deliveryAddress" type="text" />
      <label>Postcode:</label>
      <input id="deliveryPostcode" type="text" />
      <label>Bezorgtijd:</label>
      <input id="deliveryTime" type="time" />
      <label>Betaalmethode:</label>
      <select id="deliveryPayment">
        <option value="contant">Contant</option>
        <option value="online">Online betaling</option>
      </select>
    </div>
  </div>
</section>
<section id="checkbox-group">
<div class="checkbox-group">
<h2>Draag bij aan duurzaamheid en voorkom verspilling 🌱</h2>
<p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
    Geef aan hoeveel u nodig heeft:
  </p>
<div class="supply-row">
<span class="supply-img">🥢</span>
<div class="supply-content">
<label for="chopstickCount">Aantal stokjes </label>
<select id="chopstickCount"></select>
</div>
</div>
<!-- Sojasaus -->
<div class="supply-row">
<img alt="Sojasaus" class="supply-img" src="images/soja saus.jpg"/>
<div class="supply-content">
<label for="soyCount">Aantal sojasaus flesjes</label>
<select id="soyCount"></select>
</div>
</div>
<!-- Wasabi -->
<div class="supply-row">
<img alt="Wasabi" class="supply-img" src="images/wasabi.jpg"/>
<div class="supply-content">
<label for="wasabiCount">Aantal wasabi</label>
<select id="wasabiCount"></select>
</div>
</div>
<!-- Gember -->
<div class="supply-row">
<img alt="Gember" class="supply-img" src="images/gember.jpg"/>
<div class="supply-content">
<label for="gemberCount">Aantal gember</label>
<select id="gemberCount"></select>
</div>
</div>
</div></section>


<div class="cart-section" id="mobileCart">
  <button id="closeCartBtn" onclick="toggleMobileCart()">×</button>
  <h2 style="padding-top: 60px;">Winkelwagen</h2>
  <ul id="cart"></ul>
  <div class="total">Totaal: €<span id="total">0.00</span></div>
  <button onclick="checkout()">Afrekenen &amp; Betalen</button>
</div>

<button id="cart-toggle" onclick="toggleMobileCart()">🛒<span id="cart-count" style="
      position: absolute;
      top: -6px;
      right: -6px;
      background: red;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.75rem;
      font-weight: bold;
      line-height: 1;">0</span>
</button>

 



<section id="bento">
  <div class="bento-group">
    <h2>Bento Box 🍱</h2>
    <p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
      Kies uw favoriete Bento en hoeveelheid:
    </p>

    <div class="bento-row menu-item" data-name="Chicken Bento" data-price="12">
      <img class="bento-img" src="images/chicken-bento.jpg" alt="Chicken Bento" loading="lazy"/>
      <div class="bento-content">
        <h3>Chicken Bento</h3>
        <p>€ 12.00</p>
        <label for="chickenBentoCount">Aantal</label>
        <select id="chickenBentoCount" name="chickenBentoCount"></select>
        <button type="button" class="qty-plus add-button" data-target="chickenBentoCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="chickenBentoCount">-</button>
      </div>
    </div>

    <!-- 你可以添加更多 Bento 项 -->
  </div>
</section>

<section id="sushi">
  <div class="menu-group">
    <h2>Sushi Rolls 🍣</h2>
    <p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
      Kies uw sushi en hoeveelheid:
    </p>

    <div class="menu-row menu-item" data-name="Sake Maki" data-price="8.5">
      <img class="menu-img" src="images/sake-maki.jpg" alt="Sake Maki" loading="lazy" />
      <div class="menu-content">
        <h3>Sake Maki</h3>
        <p>€ 8.50</p>
        <label for="sakeCount">Aantal</label>
        <select id="sakeCount" name="sakeCount"></select>
        <button type="button" class="qty-plus add-button" data-target="sakeCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="sakeCount">-</button>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="California Roll" data-price="10">
      <div class="menu-img" style="width: 100px; height: 100px; background: #eee; display: flex; align-items: center; justify-content: center;">
        <span style="color: #999;">Geen foto</span>
      </div>
      <div class="menu-content">
        <h3>California Roll</h3>
        <p>€ 10.00</p>
        <label for="californiaCount">Aantal</label>
        <select id="californiaCount" name="californiaCount"></select>
        <button type="button" class="qty-plus add-button" data-target="californiaCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="californiaCount">-</button>
      </div>
    </div>
  </div>
</section>
<section id="bubble">
  <div class="menu-group">
    <h2>Bubble Tea 🧋</h2>
    <p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
      Kies uw smaak en hoeveelheid:
    </p>

    <div class="menu-row menu-item" data-name="Bubble Tea" data-price="5">
      <div class="menu-img">
        <img src="images/bubble-tea.jpg" alt="Bubble Tea" class="menu-img" loading="lazy" />
      </div>
      <div class="menu-content">
        <h3>Bubble Tea</h3>
        <p>€ 5.00</p>
        <label for="bubbleTeaCount">Aantal</label>
        <select id="bubbleTeaCount" name="bubbleTeaCount"></select>
        <button type="button" class="qty-plus add-button" data-target="bubbleTeaCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="bubbleTeaCount">-</button>
      </div>
    </div>
  </div>
</section>
<section id="dessert">
  <div class="menu-group">
    <h2>Dessert 🍡</h2>
    <p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
      Kies uw dessert en hoeveelheid:
    </p>

    <div class="menu-row menu-item" data-name="Mochi" data-price="4">
      <img src="images/mochi.jpg" alt="Mochi" class="menu-img" loading="lazy" />
      <div class="menu-content">
        <h3>Mochi (rijstcake)</h3>
        <p>€ 4.00</p>
        <label for="dessertCount">Aantal</label>
        <select id="dessertCount" name="dessertCount"></select>
        <button type="button" class="qty-plus add-button" data-target="dessertCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="dessertCount">-</button>
      </div>
    </div>
  </div>
</section>
<section id="snack">
  <div class="menu-group">
    <h2>Snack 🍤</h2>
    <p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
      Kies uw snack en hoeveelheid:
    </p>

    <div class="menu-row menu-item" data-name="Karaage" data-price="6.5">
      <img src="images/karaage.jpg" alt="Karaage" class="menu-img" loading="lazy" />
      <div class="menu-content">
        <h3>Karaage (Japanse gefrituurde kip)</h3>
        <p>€ 6.50</p>
        <label for="snackCount">Aantal</label>
        <select id="snackCount" name="snackCount"></select>
        <button type="button" class="qty-plus add-button" data-target="snackCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="snackCount">-</button>
      </div>
    </div>
  </div>
</section>
<section id="vegan">
  <div class="menu-group">
    <h2>Vegan 🥬</h2>
    <p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
      Kies uw vegan optie en hoeveelheid:
    </p>

    <div class="menu-row menu-item" data-name="Avocado Roll" data-price="7">
      <img src="images/avocado-roll.jpg" alt="Avocado Roll" class="menu-img" loading="lazy" />
      <div class="menu-content">
        <h3>Avocado Roll</h3>
        <p>€ 7.00</p>
        <label for="veganCount">Aantal</label>
        <select id="veganCount" name="veganCount"></select>
        <button type="button" class="qty-plus add-button" data-target="veganCount">+</button>
        <button type="button" class="qty-minus remove-button" data-target="veganCount">-</button>
      </div>
    </div>
  </div>
</section>

<script>
const cart = {};
const extras = {
  chopstickCount: { label: 'Stokjes', price: 0 },
  soyCount: { label: 'Sojasaus', price: 0 },
  wasabiCount: { label: 'Wasabi', price: 0 },
  gemberCount: { label: 'Gember', price: 0 }
};

function populateSelect(select) {
  for (let i = 0; i <= 20; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    select.appendChild(opt);
  }
}

function createSelect(current, onChange) {
  const select = document.createElement('select');
  for (let i = 0; i <= 20; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    if (i === current) opt.selected = true;
    select.appendChild(opt);
  }
  select.addEventListener('change', () => onChange(parseInt(select.value)));
  return select;
}

function setQty(name, price, qty) {
  if (qty === 0) {
    delete cart[name];
  } else {
    cart[name] = { price, qty };
  }
  updateCart();
}

function updateCart() {
  const list = document.getElementById('cart');
  list.innerHTML = '';
  let total = 0;

  Object.entries(cart).forEach(([name, item]) => {
    const li = document.createElement('li');
    const sel = createSelect(item.qty, val => {
      document.querySelector(`[data-name="${name}"] select`).value = val;
      setQty(name, item.price, val);
    });
    const subtotal = item.qty * item.price;
    li.textContent = `${name} = €${subtotal.toFixed(2)} `;
    li.appendChild(sel);
    list.appendChild(li);
    if (item.qty > 0) total += subtotal;
  });

  const title = document.createElement('li');
  title.textContent = '— Extra’s —';
  title.style.marginTop = '10px';
  title.style.fontWeight = 'bold';
  list.appendChild(title);

  Object.keys(extras).forEach(id => {
    const li = document.createElement('li');
    li.textContent = `${extras[id].label}: `;
    const sel = createSelect(parseInt(document.getElementById(id).value || 0), val => {
      document.getElementById(id).value = val;
      updateCart();
    });
    li.appendChild(sel);
    list.appendChild(li);
  });

  document.getElementById('total').textContent = total.toFixed(2);

  const totalQty = Object.values(cart).reduce((s, it) => s + it.qty, 0) +
    Object.keys(extras).reduce((s, id) => s + parseInt(document.getElementById(id).value || 0), 0);

  const badge = document.getElementById('cart-count');
  badge.textContent = totalQty;
  badge.style.display = totalQty > 0 ? 'inline-block' : 'none';
}

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.menu-item select').forEach(sel => {
    populateSelect(sel);
    const parent = sel.closest('.menu-item');
    const name = parent.dataset.name;
    const price = parseFloat(parent.dataset.price);
    sel.addEventListener('change', () => {
      setQty(name, price, parseInt(sel.value));
    });
  });

  document.querySelectorAll('.qty-plus').forEach(btn => {
    btn.addEventListener('click', () => {
      const sel = document.getElementById(btn.dataset.target);
      let val = parseInt(sel.value);
      if (val < 20) val++;
      sel.value = val;
      const parent = sel.closest('.menu-item');
      setQty(parent.dataset.name, parseFloat(parent.dataset.price), val);
    });
  });

  document.querySelectorAll('.qty-minus').forEach(btn => {
    btn.addEventListener('click', () => {
      const sel = document.getElementById(btn.dataset.target);
      let val = parseInt(sel.value);
      if (val > 0) val--;
      sel.value = val;
      const parent = sel.closest('.menu-item');
      setQty(parent.dataset.name, parseFloat(parent.dataset.price), val);
    });
  });

  Object.keys(extras).forEach(id => {
    const sel = document.getElementById(id);
    populateSelect(sel);
    sel.addEventListener('change', updateCart);
  });

  updateCart();
});
</script>

<script>
function checkout() {
  const paidItems = cart.filter(item => item.price > 0 && item.qty > 0);
  if (paidItems.length === 0) {
    alert('U moet ten minste één gerecht selecteren om te bestellen.');
    return;
  }

  const chopstickCount = document.getElementById('chopstickCount').value;
  const soyCount = document.getElementById('soyCount').value;
  const wasabiCount = document.getElementById('wasabiCount').value;
  const gemberCount = document.getElementById('gemberCount').value;

  let orderSummary = cart.map(item => `${item.name} x ${item.qty}`).join('\n');
  orderSummary += `\nStokjes nodig: ${chopstickCount}`;
  orderSummary += `\nSojasaus: ${soyCount}`;
  orderSummary += `\nWasabi: ${wasabiCount}`;
  orderSummary += `\nGember: ${gemberCount}`;

  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  let customerDetails = '';
  let paymentMethod = '';

  if (orderType === 'afhalen') {
    const name = document.getElementById('pickupName').value.trim();
    const phone = document.getElementById('pickupPhone').value.trim();
    const time = document.getElementById('pickupTime').value;
    paymentMethod = document.getElementById('pickupPayment').value;

    if (!name || !phone || !time) {
      alert("Vul alstublieft alle afhaalvelden in: naam, telefoon en tijd.");
      return;
    }

    customerDetails = `\n[Afhalen]\nNaam: ${name}\nTelefoon: ${phone}\nAfhaaltijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  } else {
    const name = document.getElementById('deliveryName').value.trim();
    const phone = document.getElementById('deliveryPhone').value.trim();
    const address = document.getElementById('deliveryAddress').value.trim();
    const postcodeRaw = document.getElementById('deliveryPostcode').value.trim();
    const time = document.getElementById('deliveryTime').value;
    paymentMethod = document.getElementById('deliveryPayment').value;

    const postcodeClean = postcodeRaw.replace(/\s+/g, '');
    const postcode = postcodeClean.slice(0, 4);
    const allowedPostcodes = ['2341', '2342', '2343', '2333', '2334', '2231', '2232', '2361', '2235'];

    if (!name || !phone || !address || !postcodeRaw || !time) {
      alert("Vul alstublieft alle bezorgvelden in: naam, telefoon, adres, postcode en tijd.");
      return;
    }

    if (!allowedPostcodes.includes(postcode)) {
      alert(`🚫 Wij bezorgen helaas niet in dit postcodegebied (${postcode}).`);
      const postcodeField = document.getElementById('deliveryPostcode');
      postcodeField.style.borderColor = 'red';
      postcodeField.focus();
      return;
    } else {
      document.getElementById('deliveryPostcode').style.borderColor = '';
    }

    customerDetails = `\n[Bezorgen]\nNaam: ${name}\nTelefoon: ${phone}\nAdres: ${address}\nPostcode: ${postcodeRaw}\nBezorgtijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  }

  const totalPrice = document.getElementById('total').textContent;
  const message = `📦 Nieuwe bestelling bij *Nova Asia*:\n\n${orderSummary}\n${customerDetails}\nTotaal: €${totalPrice}`;

  fetch('https://flask-order-api.onrender.com/api/send', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ message })
  })
  .then(res => res.json())
  .then(data => {
    if (data.status === 'ok') {
      alert("Bestelling verzonden!\n\n" + orderSummary + "\nTotaal: €" + totalPrice);

      if (paymentMethod === 'online') {
        setTimeout(() => {
          window.location.href = 'https://tikkie.me/pay/novaasia';
        }, 300);
      }
    } else {
      alert("Fout bij verzenden bestelling: " + (data.error || "onbekend"));
    }
  })
  .catch(err => {
    alert("Netwerkfout bij verzenden bestelling");
    console.error(err);
  });
}


</script>
<script>
  function toggleOrderType() {
    const afhalen = document.getElementById('afhalen');
    const infoBox = document.getElementById('locationInfo');
    const afhalenFields = document.getElementById('afhalenFields');
    const bezorgenFields = document.getElementById('bezorgenFields');

    if (afhalen.checked) {
      infoBox.innerHTML = `Adres voor afhalen: 
  <a href="https://www.google.com/maps?q=Ommevoort+4,+2341+VT+Oegstgeest" target="_blank" style="color: #007aff; text-decoration: underline;">
    Ommevoort 4, 2341 VT Oegstgeest
  </a><br>
  📞: <a href="tel:0622599566" style="color: #007aff; text-decoration: underline;">0622599566</a>`;
      
      afhalenFields.classList.remove('hidden');
      bezorgenFields.classList.add('hidden');
    } else {
      infoBox.textContent = 'Wij bezorgen in de volgende postcodegebieden:\n2341, 2342, 2343, 2333, 2334, 2231, 2232, 2361, 2235';
      
      bezorgenFields.classList.remove('hidden');
      afhalenFields.classList.add('hidden');
    }
  }

  // 初始化执行一次
  toggleOrderType();
</script>





<script>
  const allowedPostcodes = ['2341', '2342', '2343', '2333', '2334', '2231', '2232', '2361', '2235'];
  const postcodeInput = document.getElementById('deliveryPostcode');

  postcodeInput.addEventListener('blur', function () {
    const raw = this.value.trim();
    const formatRegex = /^[0-9]{4}[A-Z]{2}$/;
    let hint = document.getElementById('postcodeHint');

    if (!hint) {
      hint = document.createElement('div');
      hint.id = 'postcodeHint';
      hint.style.color = 'red';
      hint.style.marginTop = '4px';
      this.parentNode.appendChild(hint);
    }

    // 格式检查
    if (!formatRegex.test(raw)) {
      this.style.borderColor = 'red';
      hint.textContent = 'Postcode moet het formaat 1234AB hebben (zonder spatie).';
      return;
    }

    // 区域检查
    const postcode = raw.slice(0, 4); // 取前4位数字
    if (!allowedPostcodes.includes(postcode)) {
      this.style.borderColor = 'red';
      hint.textContent = `🚫 Wij bezorgen niet in dit postcodegebied (${postcode}).`;
    } else {
      this.style.borderColor = '';
      hint.textContent = '';
    }
  });
</script>



<script>
function showMobileCartButtonIfNeeded() {
  const toggleBtn = document.getElementById('cart-toggle');
  if (window.innerWidth < 768) {
    toggleBtn.style.display = 'block';
  } else {
    toggleBtn.style.display = 'none';
  }
}

showMobileCartButtonIfNeeded();

window.addEventListener('resize', showMobileCartButtonIfNeeded);
</script>


<script>
  ['chopstickCount', 'soyCount', 'wasabiCount', 'gemberCount'].forEach(id => {
    document.getElementById(id).addEventListener('change', updateCart);
  });
</script>

<script>
function toggleMobileCart() {
  const cartSection = document.getElementById('mobileCart');
  cartSection.classList.toggle('mobile-visible');
}
</script>

 <script>
    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.querySelectorAll('.navbar a');
      const sections = Array.from(navLinks).map(link => document.querySelector(link.getAttribute('href')));
      const indicator = document.getElementById('indicator');
      const navbarContainer = document.getElementById('navbar-container');

      function updateIndicator(activeLink) {
        const rect = activeLink.getBoundingClientRect();
        const containerRect = navbarContainer.getBoundingClientRect();
        const scrollLeft = navbarContainer.scrollLeft;
        indicator.style.width = `${rect.width}px`;
        indicator.style.transform = `translateX(${rect.left - containerRect.left + scrollLeft}px)`;
      }

      // 手动平滑滚动函数（更快）
      function scrollToOffset(container, targetOffset, duration = 150) {
        const start = container.scrollLeft;
        const distance = targetOffset - start;
        const startTime = performance.now();

        function animate(time) {
          const elapsed = time - startTime;
          const progress = Math.min(elapsed / duration, 1);
          container.scrollLeft = start + distance * progress;
          if (progress < 1) {
            requestAnimationFrame(animate);
          }
        }

        requestAnimationFrame(animate);
      }

      function scrollActiveLinkIntoView(activeLink) {
        if (window.innerWidth <= 768) {
          const container = navbarContainer;
          const containerRect = container.getBoundingClientRect();
          const linkRect = activeLink.getBoundingClientRect();
          const offset = linkRect.left - containerRect.left + container.scrollLeft;
          scrollToOffset(container, offset, 150); // 更快的平滑滚动
        }
      }

      function updateActiveNav() {
        let currentSection = sections[0];
        for (let section of sections) {
          const rect = section.getBoundingClientRect();
          if (rect.top <= 100) {
            currentSection = section;
          }
        }

        navLinks.forEach(link => link.classList.remove('active'));
        const activeLink = Array.from(navLinks).find(link => link.getAttribute('href') === `#${currentSection.id}`);
        if (activeLink) {
          activeLink.classList.add('active');
          updateIndicator(activeLink);
          scrollActiveLinkIntoView(activeLink);
        }
      }

      window.addEventListener('scroll', updateActiveNav);
      window.addEventListener('resize', () => {
        const activeLink = document.querySelector('.navbar a.active');
        if (activeLink) updateIndicator(activeLink);
      });

      updateActiveNav();
    });
  </script>



</body>
</html>