
<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>POS Interface</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
    background: var(--primary-color);
    color: var(--secondary-color);
    padding-top: 60px;
    text-align: center;
  }
  @media (max-width: 480px) {
    body { padding: 10px; }
  }

  :root {
    --primary-color: #f2e9d8;
    --secondary-color: #333333;
    --accent-color: #3f5c4b;
    --off-white: #faf8f3;
    --section-alt-bg: #f0e6d7;
    --sakura: #f6d4dc;
    --gold: #c5a253;
  }
  .navbar-container::-webkit-scrollbar { display: none; }
  .navbar-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    padding: 0;
    margin: 0;
    background: rgba(255,255,255,0.65);
    backdrop-filter: blur(12px);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-bottom: 1px solid rgba(255,255,255,0.3);
    z-index: 999;
  }
  .navbar {
    display: flex;
    flex-direction: row;
    white-space: nowrap;
    position: relative;
    width: 100vw;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    scroll-behavior: auto;
  }
  .nav-categories { display: flex; white-space: nowrap; }
  @media (min-width: 768px) { .nav-categories { margin: 0 auto; } }
  .navbar a {
    flex: 0 0 auto;
    padding: 14px 20px;
    color: var(--accent-color);
    text-decoration: none;
    font-weight: bold;
    border-radius: 24px;
    transition: all 0.3s ease;
    position: relative;
    z-index: 2;
  }
  @media (max-width: 480px) {
    .navbar a { padding: 10px 14px; font-size: 0.9rem; }
    .today-btn { padding: 8px 14px; }
  }
  .navbar a.active { color: white; }
 .today-btn {
  background: linear-gradient(to bottom, #d0f0e8, #a3e4ce);
  color: #1f2e2d;
  font-weight: 600;
  padding: 10px 18px;
  border: none;
  border-radius: 14px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12),
              inset 0 1px 0 rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(6px);
  transition: all 0.2s ease-in-out;
  cursor: pointer;
  font-size: 1rem;
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10000;
}
.today-btn:hover {
  background: linear-gradient(to bottom, #b2eadd, #86dcc3);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

  .indicator {
    position: absolute;
    height: 32px;
    background-color: var(--accent-color);
    border-radius: 24px;
    bottom: 8px;
    z-index: 1;
    transition: all 0.3s ease;
    will-change: transform;
  }
  .navbar::after { content: ""; flex: 0 0 50vw; }
  section {
    padding: 40px 20px;
    box-sizing: border-box;
    border-bottom: 1px solid #ccc;
    border-radius: 16px;
    background: var(--off-white);
    margin-bottom: 20px;
  }
  section:nth-child(even) { background: var(--section-alt-bg); }
  h1,h2,h3,h4,h5,h6,p { text-align: center; }
  .menu-item {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    padding: 16px;
    margin-bottom: 12px;
    border-radius: 16px;
    background: var(--off-white);
    border: 1px solid #e0e0e0;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }
  img { max-width: 100%; height: auto; }
  .menu-item img { width: 100%; max-width: 120px; height: auto; object-fit: cover; border-radius: 12px; flex-shrink: 0; }
  .menu-item select, .menu-item button {
    margin-top: 8px;
    padding: 6px 8px;
    font-size: 0.85rem;
    height: 36px;
    border-radius: 10px;
    border: 1px solid #ccc;
  }
  /* Ensure Omakase preference dropdowns keep full width */
  #omakasePrefs select {
    width: 100%;
    max-width: 160px;
  }
  #dragonPrefs select {
    width: 100%;
    max-width: 160px;
  }
  .menu-item button {
    width: 2.2rem;
    height: 2.2rem;
    font-size: 1rem;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    border: none;
    background:#e5e5ea;
    color:#333;
    transition: background 0.2s ease;
  }
  .menu-item button:hover { background:#dcdce0; }
  .add-button { background:#b3d4ff; color:#333; }
  .add-button:hover { background:#a3c8ff; }
  .remove-button { background:#ffd6d6; color:#333; }
  .remove-button:hover { background:#ffc2c2; }
  .xbowl-summary{background:rgba(255,255,255,0.7);backdrop-filter:blur(6px);border-radius:8px;padding:4px 8px;margin:2px 0;font-size:0.8rem;}
  @media (max-width: 600px) {
    .menu-item button { width:1.8rem; height:1.8rem; font-size:0.9rem; }
    .menu-item img { max-width:80px; }
  }
  @media (max-width: 600px) { .menu-item { flex-direction: column; align-items: flex-start; } }
@media (max-width: 767px) {
  .menu-item[data-name="X-Bowl"] { aspect-ratio: auto; height: auto; }
  .menu-item[data-name="X-Bowl"] .menu-content { position: static; }
  .menu-item[data-name="X-Bowl"] img { position: static; width: 100%; height: auto; }
  .menu-item[data-name="X-Bowl"] .qty-box { position: static; transform: none; width: 100%; margin-top: 8px; }
  #xBowlMains, #xBowlToppings {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }
  #xBowlMains>div, #xBowlToppings>div {
    display: flex;
    align-items: center;
    flex: 0 0 calc(50% - 3px);
  }
  #xBowlMains select, #xBowlToppings select { width: 100%; }
  #xBowlMains button, #xBowlToppings button {
    width: 1.4rem;
    height: 1.4rem;
    font-size: 0.9rem;
  }
}


  .side-tools { width: 180px; }

  .checkout-panel {
  
  top: 80px; /* ä¸å¯¼èˆªæ ä¿æŒä¸€å®šè·ç¦» */
  align-self: flex-start;
  flex: 1.4;
  max-width: 420px;
  backdrop-filter: blur(8px);
  border-radius: 16px;
  padding: 20px;
  background: linear-gradient(to bottom, #fdfaf6, #f0e6d7);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: 1px solid rgba(0, 0, 0, 0.06);
}

 




 .checkout-panel button {
  background: linear-gradient(to bottom, #d8f4e7, #a9e5cd);
  color: #1a2e28;
  font-weight: 600;
  padding: 12px;
  width: 100%;
  font-size: 1.1rem;
  border: none;
  border-radius: 14px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12),
              inset 0 1px 0 rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(6px);
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}
  
  .checkout-panel button:hover {
    background: linear-gradient(to bottom, #b2eadd, #86dcc3);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }

  .order-type-switch {
    display: flex;
    gap: 10px;
    margin-top: 10px;
  }
  .order-btn input {
    display: none;
  }
  .order-btn span {
    display: block;
    padding: 8px 16px;
    border: 1px solid var(--accent-color);
    border-radius: 8px;
    cursor: pointer;
  }
  .order-btn input:checked + span {
    background: var(--accent-color);
    color: #fff;
  }

  @media (max-width: 600px) {
    .checkout-panel { width:100%; }
  }
  .orders-slide {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(8px);
    overflow: auto;
    transform: translateX(-100%);
    transition: transform 0.3s;
    z-index: 9999;
    padding: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  }
  .orders-slide.visible { transform: translateX(0); }
  .orders-panel table { width:100%; border-collapse: collapse; }
  @media (max-width: 768px) {
    .orders-panel table { display:block; overflow-x:auto; white-space:nowrap; }
  }
  .orders-panel th, .orders-panel td { border:1px solid #ddd; padding:8px; text-align:left; }
  .orders-panel th { background:#f2f2f2; }
  .orders-panel ul { margin:0; padding-left:20px; }
  input, select, textarea {
    border:1px solid rgba(255,255,255,0.4);
    border-radius:8px;
    padding:6px 10px;
    background: rgba(255,255,255,0.6);
    backdrop-filter: blur(6px);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    transition:border-color 0.2s, box-shadow 0.2s;
  }
  input:hover, select:hover, textarea:hover {
    border-color:#999;
  }
  input:focus, select:focus, textarea:focus {
    outline:none;
    border-color:var(--accent-color);
    box-shadow:0 0 0 2px rgba(63,92,75,0.2);
  }
  #closeToday {
    position: absolute;
    top: 10px;
    right: 20px;
    width: 66px; /* æ–¹å½¢æŒ‰é’® */
    height: 46px;
    background: #f0f0f0; /* é»˜è®¤æµ…ç°èƒŒæ™¯ */
    border: 1px solid #d0d0d0; /* ç»†æµ…ç°è¾¹æ¡† */
    border-radius: 4px; /* å¾®åœ†è§’ï¼Œæ¥è¿‘ Windows é£æ ¼ */
    cursor: pointer;
    font-size: 20px; /* æ˜¾çœ¼ X */
    font-weight: bold;
    color: #333; /* é»˜è®¤æ·±ç° X */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

#closeToday:hover {
    background: #e81123; /* Windows çº¢è‰² */
    border-color: #e81123; /* Hover æ—¶è¾¹æ¡†åŒæ­¥å˜çº¢ */
    color: white; /* Hover æ—¶ç™½è‰² X */
}

  
  .supply-row {
    display:flex;
    align-items:center;
    gap:10px;
    margin:10px 0;
  }
  img.supply-img {
    width:40px;
    height:40px;
    object-fit:cover;
    border-radius:12px;
  }
  .supply-select {
    min-width:80px;
    padding:6px 10px;
    font-size:0.95rem;
    border-radius:10px;
    border:1px solid #ccc;
    background:white;
    appearance:none;
  }

  .cart-area button {
    width:100%;
    margin-top:10px;
    padding:12px;
    font-size:1.1rem;
    background:#b3d4ff;
    color:#333;
    border:none;
    border-radius:12px;
    transition: background 0.3s ease;
  }
  .cart-area button:hover { background:#a3c8ff; }
  .hidden { display:none; }
.cart-area {
  position: fixed;
  top: 80px;
  right: 480px; /* 420 + 40px é—´è·ï¼Œç¡®ä¿ä¸æŒ¤ */
  width: 400px; /* ç¨å¾®æ”¶çª„ï¼Œé¿å…æ€»å®½è¶…å‡ºé¡µé¢ */
  max-height: calc(100vh - 100px);
  overflow-y: auto;
  background: linear-gradient(to bottom right, #fdfaf6, #f0e6d7);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: 1px solid rgba(0, 0, 0, 0.06);
  backdrop-filter: blur(8px);
  border-radius: 16px;
  padding: 20px;
  z-index: 1000;
}

.checkout-panel {
  position: fixed;
  top: 80px;
  right: 20px;
  width: 400px;  /* ä¹Ÿç¨å¾®æ”¶çª„ï¼Œé¿å…å¤ªå ç©ºé—´ */
  max-height: calc(100vh - 100px);
  overflow-y: auto;
  backdrop-filter: blur(8px);
  border-radius: 16px;
  padding: 20px;
  background: linear-gradient(to bottom, #fdfaf6, #f0e6d7);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: 1px solid rgba(0, 0, 0, 0.06);
  z-index: 1000;
}

@media (max-width: 768px) {
  .cart-area {
    position: static !important;
    top: auto !important;
    right: auto !important;
    width: 100% !important;
    max-height: none !important;
    overflow: visible !important;
  }

  .checkout-panel {
    position: static !important;
    top: auto !important;
    right: auto !important;
    width: 100% !important;
    max-height: none !important;
    overflow: visible !important;
  }

  .cart-panel {
    display: none; /* å¦‚æœè¿˜åœ¨ç”¨å¯ä»¥ä¿ç•™ */
  }

  .cart-toggle { display: block; }
}

  


  .center-area {
    flex: 3;
    margin-right: 60px;
    max-width: 500px; 
  }


/* Floating cart and checkout panel */
  .cart-panel {
    position: sticky;
    top: 80px;
    align-self: flex-start;
    flex: 1.4;
    max-width: 420px;
  }
  .close-btn { display:none; }
  .cart-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: none;
    background: #fff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    font-size: 1.4rem;
    cursor: pointer;
    z-index: 1100;
    display: none;
  }
  .cart-toggle .badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background: #ff3b30;
    color: #fff;
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 0.75rem;
  }
  .today-toggle {
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  font-size: 1.4rem;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
  border: none;
}

.emoji-wrapper {
  position: relative;  /* âœ… å¿…é¡»æœ‰è¿™è¡Œ */
  display: inline-block;
}

.badge-text-only {
  position: absolute;
  top: -4px;
  right: -4px;
  font-size: 0.85rem;
  font-weight: 700;
  color: red; /* çº¯çº¢è‰²å­—ä½“ */
  background: none;
  padding: 0;
  line-height: 1;
  pointer-events: none;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}



  #closeCartPanel {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #e5e5ea;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    font-size: 1.2rem;
    cursor: pointer;
  }
  @media (max-width: 768px) {
    .cart-toggle { display: block; }
  
    .cart-panel {
      position: fixed;
      inset: 0;
      overflow-y: auto;
      background: rgba(255,255,255,0.95);
      padding: 20px;
      z-index: 1050;
      display: none;
    }
    .cart-panel.open { display: block; }
    .close-btn { display: block; }
    .cart-panel .cart-area { position: static; top: auto; }
    .pos-layout { flex-direction: column; align-items: center; }
    .center-area { width:100%; margin-right:0; }
  }
  .orders-table td, .orders-table th {
  white-space: nowrap;
  padding: 8px;
}
/* é»˜è®¤éšè—åœ†æŒ‰é’® */
.today-toggle {
  display: none;
}

/* æ‰‹æœºæ˜¾ç¤ºåœ†æŒ‰é’®ï¼Œéšè—é•¿æŒ‰é’® */
@media (max-width: 768px) {
  .today-btn { display: none; }
  .today-toggle { display: flex; }
}

/* ğŸ”” æ–°è®¢å•é—ªçƒæ•ˆæœ */
.new-order {
  animation: highlightBlink 1s ease-in-out;
  animation-iteration-count: 10;
}
@keyframes highlightBlink {
  0%,100% { background-color: #eaffea; }
  50% { background-color: #fff; }
}

/* ğŸ“‹ Hide order buttons when orders panel is open */
body.today-open .today-btn,
body.today-open .today-toggle {
  display: none !important;
}

/* æ¡Œé¢æ˜¾ç¤ºé•¿æŒ‰é’®ï¼Œç¡®ä¿éšè—åœ†æŒ‰é’® */
@media (min-width: 768px) {
  .today-btn { display: block; }
  .today-toggle { display: none; }
}

  
</style>
</head>
<body>
<div class="navbar-container" id="navbar-container">
  <nav class="navbar" id="navbar">
    <div class="nav-categories">
      <a href="#customer-info">Klant</a>
      <a href="#bubble">Bubble Tea</a>
      <a href="#bento">Bento Box</a>
      <a href="#Ramen">Ramen</a>
      <a href="#Pokebowl">Pokebowl</a>
      <a href="#sushi">Special Sushi Rolls</a>
      <a href="#sashimi">Sashimi</a>
      <a href="#Crispy-rice-sandwich">Crispy Rice</a>
      <a href="#snack">Snack</a>
      <a href="#dessert">Dessert</a>
      <a href="#drinks">Drinks</a>
      <a href="#vegan">Vegan</a>
    </div>
    <div class="indicator" id="indicator"></div>
  </nav>
</div>

<div class="pos-layout">
  <div class="side-tools">
    <div id="todayOrders" class="orders-slide">
      <button id="closeToday">Ã—</button>
      <div class="orders-panel">
        <!-- Orders table inserted directly for Electron build -->
        <style>
  .orders-wrapper {
    overflow-x: auto;
    max-width: 100%;
  }

.orders-wrapper {
    overflow-x: auto;
    display: block;
    width: 100%;
    max-width: 100vw;
  }

  table.orders-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 1200px;
  }

  .orders-table th, .orders-table td {
    border: 1px solid #ccc;
    padding: 8px;
    white-space: nowrap;
    text-align: left;
  }

  .orders-table thead {
    background-color: #f9f9f9;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  td:last-child,
th:last-child {
  padding-right: 20px;
}

  .completed { background-color: #c8e6c9; }
  .cancelled { background-color: #e0e0e0; }

  .type-bezorging {
    color: red;
    font-weight: bold;
  }

  .type-afhalen {
    color: green;
    font-weight: bold;
  }

  table.orders-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 1200px; /* é¿å…å¤ªçª„ */
  }

  .orders-table th, .orders-table td {
    border: 1px solid #ccc;
    padding: 8px;
    white-space: nowrap; /* ä¸æ¢è¡Œ */
    text-align: left;
  }

  .orders-table thead {
    background-color: #f9f9f9;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  td:last-child,
th:last-child {
  padding-right: 20px;
}

</style>
<h1>Bestellingen Vandaag</h1>
<div class="orders-wrapper">
  <table class="orders-table">
    <thead>
      <tr>
       <th>Datum</th>
       <th>Tijd</th>
       <th>Type</th>
       <th>Naam</th>
       <th>Telefoon</th>
       <th>Email</th>
       <th>Items</th>
       <th>Opmerking</th>
       <th>Fooi</th>
       <th>Totaal</th>
       <th>Adres</th>
       <th>Tijdslot</th>
       <th>Betaalwijze</th>
       <th>Ordernummer</th>
       <th>Acties</th>
      </tr>
    </thead>
    <tbody>
    {% for order in orders %}
      <tr data-id="{{ order.id }}" data-order="{{ order|tojson }}" class="{% if order.is_cancelled %}cancelled{% elif order.is_completed %}completed{% endif %}">
        <td>{{ order.created_at_local.strftime('%Y-%m-%d') }}</td>
        <td>{{ order.created_at_local.strftime('%H:%M') }}</td>
        {% set is_delivery = order.order_type in ['delivery', 'bezorgen'] %}
        <td>
          <span class="{{ 'type-bezorging' if is_delivery else 'type-afhalen' }}">
            {{ 'Bezorging' if is_delivery else 'Afhalen' }}
          </span>
        </td>
        <td>{{ order.customer_name or '' }}</td>
        <td>{{ order.phone or '' }}</td>
        <td>{{ order.email or '-' }}</td>
        <td>
          <ul>
          {% for name, item in order.items_dict.items() %}
            <li>{{ name }} x {{ item['qty'] }}</li>
          {% endfor %}
          </ul>
        </td>
       <td>{{ order.opmerking or '-' }}</td>
       <td>â‚¬{{ '%.2f' % (order.fooi or order.tip or 0) }}</td>

        <td>â‚¬{{ '%.2f' % (order.totaal or 0) }}</td>

        <td>
          {% if is_delivery %}
            {{ order.street }} {{ order.house_number }} {{ order.postcode }} {{ order.city }}
            {% if order.maps_link %}
              <a href="{{ order.maps_link }}" target="_blank">ğŸ“Maps</a>
            {% endif %}
          {% else %}-{% endif %}
        </td>
        <td>
          {% if is_delivery %}
            {{ order.delivery_time or '-' }}
          {% else %}
            {{ order.pickup_time or '-' }}
          {% endif %}
        </td>
        <td>{{ order.payment_method }}</td>
        <td>{{ order.order_number or '' }}</td>
        <td>
          <button onclick="toggleComplete(this)"
            data-number="{{ order.order_number }}"
            data-name="{{ order.customer_name or '' }}"
            data-phone="{{ order.phone or '' }}"
            data-email="{{ order.email or '' }}"
            data-type="{{ 'bezorg' if is_delivery else 'afhaal' }}">
            {{ 'Undone' if order.is_completed else 'Klaar' }}</button>
          <button onclick="editOrder(this)">Bewerk</button>
          <button onclick="cancelOrder(this)">Annuleer</button>
          <span class="notify"></span>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

<script>
  function orderComplete(btn) {
    const status = btn.nextElementSibling;
    const payload = {
      order_number: btn.dataset.number,
      name: btn.dataset.name,
      phone: btn.dataset.phone,
      email: btn.dataset.email,
      order_type: btn.dataset.type
    };
    fetch('https://flask-order-api.onrender.com/api/order_complete', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    }).then(r => {
      if (r.ok) {
        status.textContent = 'Notificatie verzonden';
      } else {
        status.textContent = 'Notificatie mislukt';
      }
    }).catch(() => {
      status.textContent = 'Notificatie mislukt';
    });
  }

  function toggleComplete(btn) {
    const tr = btn.closest('tr');
    const id = tr.dataset.id;
    const done = !tr.classList.contains('completed');
    fetch(`/api/orders/${id}/status`, {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({is_completed: done})
    }).then(r=>r.json()).then(() => {
      if(done) orderComplete(btn);
      fetchOrders();
    });
  }

  function cancelOrder(btn) {
    const id = btn.closest('tr').dataset.id;
    fetch(`/api/orders/${id}/status`, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({is_cancelled: true})
    }).then(()=>fetchOrders());
  }

  function editOrder(btn) {
    const tr = btn.closest('tr');
    const id = tr.dataset.id;
    const data = JSON.parse(tr.dataset.order || '{}');
    const name = prompt('Naam', data.customer_name || '');
    if(name === null) return;
    const phone = prompt('Telefoon', data.phone || '');
    if(phone === null) return;
    const email = prompt('Email', data.email || '');
    if(email === null) return;
    const street = prompt('Straat', data.street || '');
    if(street === null) return;
    const number = prompt('Huisnummer', data.house_number || '');
    if(number === null) return;
    const postcode = prompt('Postcode', data.postcode || '');
    if(postcode === null) return;
    const city = prompt('Plaats', data.city || '');
    if(city === null) return;
    const pickup = prompt('Afhaaltijd', data.pickup_time || '');
    if(pickup === null) return;
    const delivery = prompt('Bezorgtijd', data.delivery_time || '');
    if(delivery === null) return;

    fetch(`/api/orders/${id}`, {
      method:'PUT',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        customer_name:name, phone, email,
        street, house_number:number, postcode, city,
        pickup_time:pickup, delivery_time:delivery
      })
    }).then(()=>fetchOrders());
  }
</script>
      </div>
    </div>
  </div>
  <div class="center-area">
    <div class="product-list">
<!-- Menu inserted directly for Electron build -->

<section id="bubble">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Bubble Tea
</h2>
<div class="menu-row menu-item" data-name="Bubble Tea" data-packaging="0.2" data-price="5">
<div class="menu-img">
<img alt="Bubble Tea" src="{{ url_for('static', filename='images/bubble-tea-main.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Bubble Tea</h3>
<p>â‚¬ 5.00</p>
<div class="bubble-option">
<select id="bubbleType">
<option value="">Base</option>
<option value="Green Tea">Green Tea</option>
<option value="Milk Tea">Milk Tea</option>
<option value="Milkshake">Milkshake</option>
</select>
</div>
<div class="bubble-option">
<select id="bubbleFlavor">
<option value="">Smaak</option>
<option value="Mango">Mango</option>
<option value="Appel">Appel</option>
<option value="Matcha">Matcha</option>
<option value="Brown Sugar">Brown Sugar</option>
</select>
</div>
<div class="bubble-option">
  <select id="bubbleTopping">
<option value="">Topping</option>
<option value="Appel Popping">Appel Popping</option>
<option value="Perzik Popping">Perzik Popping</option>
  <option value="Tapioca">Tapioca</option>
  </select>
</div>
        <div class="new-set-wrap hidden" id="bubbleNewWrap">
          <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
          <button type="button" class="new-set-button" id="bubbleNew">druk op</button>
        </div>
<div class="qty-box">
  <label for="bubbleTeaQty">Aantal</label>
<button class="qty-minus remove-button" data-target="bubbleTeaQty" type="button">-</button>
<select id="bubbleTeaQty"></select>
<button class="qty-plus add-button" data-target="bubbleTeaQty" type="button">+</button>
</div>
</div>
<section id="bento">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Bento box
</h2>
<!-- Chicken Bento -->
<div class="menu-row menu-item" data-name="Chicken Bento" data-packaging="0.2" data-price="22">
<div class="menu-img">
<img alt="Chicken Bento" src="{{ url_for('static', filename='images/chicken-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Chicken Bento</h3>
<p>â‚¬ 22.00</p>
<div class="qty-box">
<label for="chickenBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="chickenBentoCount" type="button">-</button>
<select id="chickenBentoCount" name="chickenBentoCount"></select>
<button class="qty-plus add-button" data-target="chickenBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Meatlover Bento -->
<!-- Meatlover Bento -->
<div class="menu-row menu-item" data-name="Meatlover Bento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Meatlover Bento" src="{{ url_for('static', filename='images/Meatlove bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Meatlover Bento</h3>
<p>â‚¬ 25.00</p>
<div class="qty-box">
<label for="meatloverBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="meatloverBentoCount" type="button">-</button>
<select id="meatloverBentoCount" name="meatloverBentoCount"></select>
<button class="qty-plus add-button" data-target="meatloverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Zalm Lover Bento -->
<div class="menu-row menu-item" data-name="Zalm Lover Bento" data-packaging="0.2" data-price="23">
<div class="menu-img">
<img alt="Zalm Lover Bento" src="{{ url_for('static', filename='images/zalm-lover-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Zalm Lover Bento</h3>
<p>â‚¬ 23.00</p>
<div class="qty-box">
<label for="zalmLoverBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="zalmLoverBentoCount" type="button">-</button>
<select id="zalmLoverBentoCount" name="zalmLoverBentoCount"></select>
<button class="qty-plus add-button" data-target="zalmLoverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Ebi Lover Bento -->
<div class="menu-row menu-item" data-name="Ebi Lover Bento" data-packaging="0.2" data-price="23">
<div class="menu-img">
<img alt="Ebi Lover Bento" src="{{ url_for('static', filename='images/ebi-lover-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Ebi Lover Bento</h3>
<p>â‚¬ 23.00</p>
<div class="qty-box">
<label for="ebiLoverBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="ebiLoverBentoCount" type="button">-</button>
<select id="ebiLoverBentoCount" name="ebiLoverBentoCount"></select>
<button class="qty-plus add-button" data-target="ebiLoverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Surf & Turf Bento -->
<div class="menu-row menu-item" data-name="Surf &amp; Turf Bento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Surf &amp; Turf Bento" src="{{ url_for('static', filename='images/surf-turf-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Surf &amp; Turf Bento</h3>
<p>â‚¬ 25.00</p>
<div class="qty-box">
<label for="surfTurfBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="surfTurfBentoCount" type="button">-</button>
<select id="surfTurfBentoCount" name="surfTurfBentoCount"></select>
<button class="qty-plus add-button" data-target="surfTurfBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Dimsum Bento -->
<div class="menu-row menu-item" data-name="Dimsum Bento" data-packaging="0.2" data-price="15">
<div class="menu-img">
<img alt="Dimsum Bento" src="{{ url_for('static', filename='images/dimsum-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Dimsum Bento</h3>
<p>â‚¬ 15.00</p>
<div class="qty-box">
<label for="dimsumBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="dimsumBentoCount" type="button">-</button>
<select id="dimsumBentoCount" name="dimsumBentoCount"></select>
<button class="qty-plus add-button" data-target="dimsumBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Lamskotelet Bento -->
<div class="menu-row menu-item" data-name="Lamskotelet Bento" data-packaging="0.2" data-price="28">
<div class="menu-img">
<img alt="Lamskotelet Bento" src="{{ url_for('static', filename='images/lamskotelet-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Lamskotelet Bento</h3>
<p>â‚¬ 28.00</p>
<div class="qty-box">
<label for="lamsBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="lamsBentoCount" type="button">-</button>
<select id="lamsBentoCount" name="lamsBentoCount"></select>
<button class="qty-plus add-button" data-target="lamsBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Veggie Bento -->
<div class="menu-row menu-item" data-name="Veggie Bento" data-packaging="0.2" data-price="20">
<div class="menu-img">
<img alt="Veggie Bento" src="{{ url_for('static', filename='images/veggie-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Veggie Bento</h3>
<p>â‚¬ 20.00</p>
<div class="qty-box">
<label for="veggieBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="veggieBentoCount" type="button">-</button>
<select id="veggieBentoCount" name="veggieBentoCount"></select>
<button class="qty-plus add-button" data-target="veggieBentoCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Bento Sushi Omakase" data-packaging="0.2" data-price="22">
<div class="menu-img">
<img alt="Bento Sushi Omakase" src="{{ url_for('static', filename='images/sushi-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Bento Sushi Omakase</h3>
<p>â‚¬ 22.00</p>
<p class="menu-description">Â±16st Verrassing van de chef!</p>
<div class="qty-box">
<label for="sushiBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="sushiBentoCount" type="button">-</button>
<select id="sushiBentoCount" name="sushiBentoCount"></select>
<button class="qty-plus add-button" data-target="sushiBentoCount" type="button">+</button>
</div>
<div id="omakasePrefs"></div>
</div>
</div>
<!-- Xbento - Stel je eigen bento samen -->
<!-- Xbento - Stel je eigen bento samen -->
<div class="menu-row menu-item" data-name="Xbento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Xbento" src="{{ url_for('static', filename='images/xbento.png') }}"/>
</div>
<div class="menu-content">
<h3>Xbento (stel zelf samen)</h3>
<p>Vanaf â‚¬ 25.00</p>
<div class="bubble-option">
<select id="xBentoMain">
<option value="">Hoofdgerecht</option>
</select>
</div>
<div class="bubble-option">
<select id="xBentoSide">
<option value="">Bijgerecht</option>
</select>
</div>
<div class="bubble-option">
  <select id="xBentoRice">
<option value="">Rijstsoort</option>
  </select>
</div>
<div class="bubble-option">
  <select id="xBentoVeg">
    <option value="">Groente</option>
  </select>
</div>
    <div class="new-set-wrap hidden" id="xBentoNewWrap">
      <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
      <button type="button" class="new-set-button" id="xBentoNew">druk op</button>
    </div>
<div class="qty-box">
  <label for="xBentoQty">Aantal</label>
<button class="qty-minus remove-button" data-target="xBentoQty" type="button">-</button>
<select class="qty-select" id="xBentoQty" name="xBentoQty"></select>
<button class="qty-plus add-button" data-target="xBentoQty" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="drinks">
<div class="menu-group">
<div class="menu-row menu-item" data-name="Cola" data-packaging="0.2" data-price="2">
<div class="menu-img">
<img alt="Cola" loading="lazy" src="https://via.placeholder.com/150">
</div>
<div class="menu-content">
<h3>Cola</h3>
<p>â‚¬ 2.00</p>
<div class="qty-box">
<label for="colaCount">Aantal</label>
<button class="qty-minus remove-button" data-target="colaCount" type="button">-</button>
<select id="colaCount" name="colaCount"></select>
<button class="qty-plus add-button" data-target="colaCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Cola Zero" data-packaging="0.2" data-price="2">
<div class="menu-img">
<img alt="Cola Zero" loading="lazy" src="https://via.placeholder.com/150">
</div>
<div class="menu-content">
<h3>Cola Zero</h3>
<p>â‚¬ 2.00</p>
<div class="qty-box">
<label for="colaZeroCount">Aantal</label>
<button class="qty-minus remove-button" data-target="colaZeroCount" type="button">-</button>
<select id="colaZeroCount" name="colaZeroCount"></select>
<button class="qty-plus add-button" data-target="colaZeroCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="drinks">
<div class="menu-group">
<div class="menu-row menu-item" data-name="Cola" data-packaging="0.2" data-price="2.5">
<div class="menu-img">
<img alt="Cola" loading="lazy" src="https://via.placeholder.com/150">
</div>
<div class="menu-content">
<h3>Cola</h3>
<p>â‚¬ 2.50</p>
<div class="qty-box">
<label for="colaCount">Aantal</label>
<button class="qty-minus remove-button" data-target="colaCount" type="button">-</button>
<select id="colaCount" name="colaCount"></select>
<button class="qty-plus add-button" data-target="colaCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Cola Zero" data-packaging="0.2" data-price="2.5">
<div class="menu-img">
<img alt="Cola Zero" loading="lazy" src="https://via.placeholder.com/150">
</div>
<div class="menu-content">
<h3>Cola Zero</h3>
<p>â‚¬ 2.50</p>
<div class="qty-box">
<label for="colaZeroCount">Aantal</label>
<button class="qty-minus remove-button" data-target="colaZeroCount" type="button">-</button>
<select id="colaZeroCount" name="colaZeroCount"></select>
<button class="qty-plus add-button" data-target="colaZeroCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<!-- Pokebowl Section -->
<section id="Ramen">
<h2>Ramen</h2>
<div class="menu-section">
  <!-- Ebi Furai Ramen -->
  <div class="menu-row menu-item" data-code="ebi" data-name="Ebi Furai" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Ebi Furai Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Ebi Furai</h3>
      <p>â‚¬ 18.00</p>
      <div class="bubble-option">
        <select id="ebiBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="ebiSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Soyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="ebiNewWrap">
        <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
        <button type="button" class="new-set-button" id="ebiNew">druk op</button>
      </div>
      <div class="qty-box">
        <label for="ebiQty">Aantal</label>
        <button class="qty-minus remove-button" data-target="ebiQty" type="button">-</button>
        <select id="ebiQty"></select>
        <button class="qty-plus add-button" data-target="ebiQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Chicken Ramen -->
  <div class="menu-row menu-item" data-code="chicken" data-name="Chicken" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Chicken Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Chicken</h3>
      <p>â‚¬ 18.00</p>
      <div class="bubble-option">
        <select id="chickenBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="chickenSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Soyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="chickenNewWrap">
        <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
        <button type="button" class="new-set-button" id="chickenNew">druk op</button>
      </div>
      <div class="qty-box">
        <label for="chickenQty">Aantal</label>
        <button class="qty-minus remove-button" data-target="chickenQty" type="button">-</button>
        <select id="chickenQty"></select>
        <button class="qty-plus add-button" data-target="chickenQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Beef Ramen -->
  <div class="menu-row menu-item" data-code="beef" data-name="Beef" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Beef Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Beef</h3>
      <p>â‚¬ 18.00</p>
      <div class="bubble-option">
        <select id="beefBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="beefSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Soyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="beefNewWrap">
        <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
        <button type="button" class="new-set-button" id="beefNew">druk op</button>
      </div>
      <div class="qty-box">
        <label for="beefQty">Aantal</label>
        <button class="qty-minus remove-button" data-target="beefQty" type="button">-</button>
        <select id="beefQty"></select>
        <button class="qty-plus add-button" data-target="beefQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Ribeye Ramen -->
  <div class="menu-row menu-item" data-code="ribeye" data-name="Ribeye" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Ribeye Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Ribeye</h3>
      <p>â‚¬ 18.00</p>
      <div class="bubble-option">
        <select id="ribeyeBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="ribeyeSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Soyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="ribeyeNewWrap">
        <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
        <button type="button" class="new-set-button" id="ribeyeNew">druk op</button>
      </div>
      <div class="qty-box">
        <label for="ribeyeQty">Aantal</label>
        <button class="qty-minus remove-button" data-target="ribeyeQty" type="button">-</button>
        <select id="ribeyeQty"></select>
        <button class="qty-plus add-button" data-target="ribeyeQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Chasiu Ramen -->
  <div class="menu-row menu-item" data-code="chasiu" data-name="Chasiu" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Chasiu Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Chasiu</h3>
      <p>â‚¬ 18.00</p>
      <div class="bubble-option">
        <select id="chasiuBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="chasiuSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Soyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="chasiuNewWrap">
        <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
        <button type="button" class="new-set-button" id="chasiuNew">druk op</button>
      </div>
      <div class="qty-box">
        <label for="chasiuQty">Aantal</label>
        <button class="qty-minus remove-button" data-target="chasiuQty" type="button">-</button>
        <select id="chasiuQty"></select>
        <button class="qty-plus add-button" data-target="chasiuQty" type="button">+</button>
      </div>
    </div>
  </div>
</div>
</section>
<section id="Pokebowl">
  <h2>Pokebowl</h2>
  <div class="menu-section">
    <div class="menu-row menu-item" data-name="Zalm Bowl" data-price="15" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/zwp.png') }}" alt="Zalm Bowl">
      </div>
      <div class="menu-content">
        <h3>Zalm Bowl</h3>
        <p>â‚¬ 15.00</p>
        <div class="qty-box">
          <label for="zalmBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="zalmBowlQty" type="button">-</button>
          <select id="zalmBowlQty" name="zalmBowlQty"></select>
          <button class="qty-plus add-button" data-target="zalmBowlQty" type="button">+</button>
        </div>
      </div>
    </div>
    <div class="menu-row menu-item" data-name="Tuna Bowl" data-price="15" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/tup.png') }}" alt="Tuna Bowl">
      </div>
      <div class="menu-content">
        <h3>Tuna Bowl</h3>
        <p>â‚¬ 15.00</p>
        <div class="qty-box">
          <label for="tunaBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="tunaBowlQty" type="button">-</button>
          <select id="tunaBowlQty" name="tunaBowlQty"></select>
          <button class="qty-plus add-button" data-target="tunaBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Ebi Fry Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/è™¾boel.png') }}" alt="Ebi Fry Bowl">
      </div>
      <div class="menu-content">
        <h3>Ebi Fry Bowl</h3>
        <p>â‚¬ 15.50</p>
        <div class="qty-box">
          <label for="ebiFryBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="ebiFryBowlQty" type="button">-</button>
          <select id="ebiFryBowlQty" name="ebiFryBowlQty"></select>
          <button class="qty-plus add-button" data-target="ebiFryBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Chicken Karaage Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/chicken-kar.jpg') }}" alt="Chicken Karaage Bowl">
      </div>
      <div class="menu-content">
        <h3>Chicken Karaage Bowl</h3>
        <p>â‚¬ 15.50</p>
        <div class="qty-box">
          <label for="chickenKaraageBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="chickenKaraageBowlQty" type="button">-</button>
          <select id="chickenKaraageBowlQty" name="chickenKaraageBowlQty"></select>
          <button class="qty-plus add-button" data-target="chickenKaraageBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Spicy Chicken Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/chicken-kar.jpg') }}" alt="Spicy Chicken Bowl">
      </div>
      <div class="menu-content">
        <h3>Spicy Chicken Bowl</h3>
        <p>â‚¬ 15.50</p>
        <div class="qty-box">
          <label for="spicyChickenBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="spicyChickenBowlQty" type="button">-</button>
          <select id="spicyChickenBowlQty" name="spicyChickenBowlQty"></select>
          <button class="qty-plus add-button" data-target="spicyChickenBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Teriyaki Chicken Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/teriyaki-chicken-bowl.jpg') }}" alt="Teriyaki Chicken Bowl">
      </div>
      <div class="menu-content">
        <h3>Teriyaki Chicken Bowl</h3>
        <p>â‚¬ 15.50</p>
        <div class="qty-box">
          <label for="teriyakiChickenBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="teriyakiChickenBowlQty" type="button">-</button>
          <select id="teriyakiChickenBowlQty" name="teriyakiChickenBowlQty"></select>
          <button class="qty-plus add-button" data-target="teriyakiChickenBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Teriyaki Beef Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/nrp.png') }}" alt="Teriyaki Beef Bowl">
      </div>
      <div class="menu-content">
        <h3>Teriyaki Beef Bowl</h3>
        <p>â‚¬ 15.50</p>
        <div class="qty-box">
          <label for="teriyakiBeefBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="teriyakiBeefBowlQty" type="button">-</button>
          <select id="teriyakiBeefBowlQty" name="teriyakiBeefBowlQty"></select>
          <button class="qty-plus add-button" data-target="teriyakiBeefBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="California Bowl" data-price="14" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/calibowl.png') }}" alt="California Bowl">
      </div>
      <div class="menu-content">
        <h3>California Bowl</h3>
        <p>â‚¬ 14.00</p>
        <div class="qty-box">
          <label for="californiaBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="californiaBowlQty" type="button">-</button>
          <select id="californiaBowlQty" name="californiaBowlQty"></select>
          <button class="qty-plus add-button" data-target="californiaBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Vega Bowl" data-price="13" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/vega-bowl.jpg') }}" alt="Vega Bowl">
      </div>
      <div class="menu-content">
        <h3>Vega Bowl (Vegetarisch)</h3>
        <p>â‚¬ 13.00</p>
        <div class="qty-box">
          <label for="vegaBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="vegaBowlQty" type="button">-</button>
          <select id="vegaBowlQty" name="vegaBowlQty"></select>
          <button class="qty-plus add-button" data-target="vegaBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Meatlover Bowl" data-price="17" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/meatlover-bowl.jpg') }}" alt="Meatlover Bowl">
      </div>
      <div class="menu-content">
        <h3>Meatlover Bowl</h3>
        <p>â‚¬ 17.00</p>
        <div class="qty-box">
          <label for="meatloverBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="meatloverBowlQty" type="button">-</button>
          <select id="meatloverBowlQty" name="meatloverBowlQty"></select>
          <button class="qty-plus add-button" data-target="meatloverBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Rainbow Bowl" data-price="17" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/rainbowl.png') }}" alt="Rainbow Bowl">
      </div>
      <div class="menu-content">
        <h3>Rainbow Bowl</h3>
        <p>â‚¬ 17.00</p>
        <div class="qty-box">
          <label for="rainbowBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="rainbowBowlQty" type="button">-</button>
          <select id="rainbowBowlQty" name="rainbowBowlQty"></select>
          <button class="qty-plus add-button" data-target="rainbowBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Spicy Tuna Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/spicy-tuna-bowl.jpg') }}" alt="Spicy Tuna Bowl">
      </div>
      <div class="menu-content">
        <h3>Spicy Tuna Bowl</h3>
        <p>â‚¬ 15.50</p>
        <div class="qty-box">
          <label for="spicyTunaBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="spicyTunaBowlQty" type="button">-</button>
          <select id="spicyTunaBowlQty" name="spicyTunaBowlQty"></select>
          <button class="qty-plus add-button" data-target="spicyTunaBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Flamed Zalm Bowl" data-price="16" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/flamed-salmon-bowl.jpg') }}" alt="Flamed Zalm Bowl">
      </div>
      <div class="menu-content">
        <h3>Flamed Zalm Bowl</h3>
        <p>â‚¬ 16.00</p>
        <div class="qty-box">
          <label for="flamedZalmBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="flamedZalmBowlQty" type="button">-</button>
          <select id="flamedZalmBowlQty" name="flamedZalmBowlQty"></select>
          <button class="qty-plus add-button" data-target="flamedZalmBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Flamed Tuna Bowl" data-price="16" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/flamed-tuna-bowl.png') }}" alt="Flamed Tuna Bowl">
      </div>
      <div class="menu-content">
        <h3>Flamed Tuna Bowl</h3>
        <p>â‚¬ 16.00</p>
        <div class="qty-box">
          <label for="flamedTunaBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="flamedTunaBowlQty" type="button">-</button>
          <select id="flamedTunaBowlQty" name="flamedTunaBowlQty"></select>
          <button class="qty-plus add-button" data-target="flamedTunaBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="X-Bowl" data-price="0" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/Xbowl.png') }}" alt="X-Bowl">
      </div>
      <div class="menu-content">
        <h3>X-Bowl (Vrije samenstelling)</h3>
        <p id="xBowlSummary" class="xbowl-summary"></p>
        <p id="xBowlPrice" class="xbowl-summary">Prijs afhankelijk van keuzes</p>
        <div class="bubble-option">
          <select id="xBowlBase">
            <option value="">Basis</option>
            <option value="Sushi rijst" data-price="4">Sushi rijst</option>
            <option value="IJsbergsla" data-price="5">IJsbergsla</option>
            <option value="Tempura crispy rijst" data-price="6">Tempura crispy rijst</option>
          </select>
        </div>
        <div id="xBowlMains"></div>
        <div id="xBowlToppings"></div>
        <div class="new-set-wrap hidden" id="xBowlNewWrap">
          <span class="new-set-msg">Toegevoegd. Nieuw selecteren?</span>
          <button type="button" class="new-set-button" id="xBowlNew">druk op</button>
        </div>
        <div class="qty-box">
          <label for="xBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="xBowlQty" type="button">-</button>
          <select id="xBowlQty" class="qty-select" name="xBowlQty"></select>
          <button class="qty-plus add-button" data-target="xBowlQty" type="button">+</button>
        </div>
      </div>
    </div>

  </div>
</section>
<section id="sushi">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Special Sushi Rolls
</h2>
<div class="menu-row menu-item" data-name="Salmon Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Green Dragon Roll" src="{{ url_for('static', filename='images/green-dragon-roll.png') }}"/>
</div>
<div class="menu-content">
<h3>Salmon Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>â‚¬ 16.00</p>
<div class="qty-box">
<label for="salmonRollCount">Aantal</label>
<button class="qty-minus remove-button" data-target="salmonRollCount" type="button">-</button>
<select id="salmonRollCount" name="salmonRollCount"></select>
<button class="qty-plus add-button" data-target="salmonRollCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Dragon Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Angry Dragon Roll" src="{{ url_for('static', filename='images/angry-dragon.png') }}"/>
</div>
<div class="menu-content">
<h3>Dragon Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>â‚¬ 16.00</p>
<div class="qty-box">
<label for="dragonRollCount">Aantal</label>
<button class="qty-minus remove-button" data-target="dragonRollCount" type="button">-</button>
<select id="dragonRollCount" name="dragonRollCount"></select>
<button class="qty-plus add-button" data-target="dragonRollCount" type="button">+</button>
</div>
<div id="dragonPrefs"></div>
</div>
</div>
<div class="menu-row menu-item" data-name="Beef Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Beef Roll Omakase" src="{{ url_for('static', filename='images/ç‰›åœˆ.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>â‚¬ 16.00</p>
<div class="qty-box">
<label for="beefRollCount">Aantal</label>
<button class="qty-minus remove-button" data-target="beefRollCount" type="button">-</button>
<select id="beefRollCount" name="beefRollCount"></select>
<button class="qty-plus add-button" data-target="beefRollCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Chicken Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Chicken Roll Omakase" src="{{ url_for('static', filename='images/å‡ å·.png') }}"/>
</div>
<div class="menu-content">
<h3>Chicken Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>â‚¬ 16.00</p>
<div class="qty-box">
<label for="chickenRollCount">Aantal</label>
<button class="qty-minus remove-button" data-target="chickenRollCount" type="button">-</button>
<select id="chickenRollCount" name="chickenRollCount"></select>
<button class="qty-plus add-button" data-target="chickenRollCount" type="button">+</button>
</div>
</div>
</div>
</div></section>
<section id="sashimi">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
      Sashimi per 6 stuks
    </h2>

<div class="menu-row menu-item" data-name="Salmon sashimi" data-packaging="0.2" data-price="9">
<div class="menu-img">
<img alt="Salmon sashimi" src="{{ url_for('static', filename='images/ss.png') }}"/>
</div>
<div class="menu-content">
<h3>Salmon sashimi</h3>
<p>â‚¬ 9.00</p>
<div class="qty-box">
<label for="salmonSashimiQty">Aantal</label>
<button class="qty-minus remove-button" data-target="salmonSashimiQty" type="button">-</button>
<select id="salmonSashimiQty" name="salmonSashimiQty"></select>
<button class="qty-plus add-button" data-target="salmonSashimiQty" type="button">+</button>
</div>
</div>
</div>
 <div class="menu-row menu-item" data-name="Flamed salmon sashimi" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Flamed salmon sashimi" src="{{ url_for('static', filename='images/fz.png') }}"/>
</div>
<div class="menu-content">
<h3>Flamed salmon sashimi</h3>
<p>â‚¬ 10.00</p>
<div class="qty-box">
<label for="flamedsalmonSashimiQty">Aantal</label>
<button class="qty-minus remove-button" data-target="flamedsalmonSashimiQty" type="button">-</button>
<select id="flamedsalmonSashimiQty" name="flamedsalmonSashimiQty"></select>
<button class="qty-plus add-button" data-target="flamedsalmonSashimiQty" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Tonijn sashimi" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Tonijn sashimi" src="{{ url_for('static', filename='images/st.png') }}"/>
</div>
<div class="menu-content">
<h3>Tonijn sashimi</h3>
<p>â‚¬ 10.00</p>
<div class="qty-box">
<label for="tonijnSashimiQty">Aantal</label>
<button class="qty-minus remove-button" data-target="tonijnSashimiQty" type="button">-</button>
<select id="tonijnSashimiQty" name="tonijnSashimiQty"></select>
<button class="qty-plus add-button" data-target="tonijnSashimiQty" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Salmon sashimi" data-packaging="0.2" data-price="10.5">
<div class="menu-img">
<img alt="Salmon sashimi" src="{{ url_for('static', filename='images/ft.png') }}"/>
</div>
<div class="menu-content">
<h3>Flamed tonijn sashimi</h3>
<p>â‚¬ 10.50</p>
<div class="qty-box">
<label for="flamedtonijnSashimiQty">Aantal</label>
<button class="qty-minus remove-button" data-target="flamedtonijnSashimiQty" type="button">-</button>
<select id="flamedtonijnSashimiQty" name="flamedtonijnSashimiQty"></select>
<button class="qty-plus add-button" data-target="flamedtonijnSashimiQty" type="button">+</button>
</div>
</div>
</div>

<div class="menu-row menu-item" data-name="Beef sashimi" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Beef sashimi" src="{{ url_for('static', filename='images/suy.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef sashimi</h3>
<p>â‚¬ 10.00</p>
<div class="qty-box">
<label for="beefSashimiQty">Aantal</label>
<button class="qty-minus remove-button" data-target="beefSashimiQty" type="button">-</button>
<select id="beefSashimiQty" name="beefSashimiQty"></select>
<button class="qty-plus add-button" data-target="beefSashimiQty" type="button">+</button>
</div>
</div>
</div>

</div>
</section>
<section id="Crispy-rice-sandwich">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
      Crispy rice sandwich
    </h2>
<!-- Zalm -->
<div class="menu-row menu-item" data-name="Zalm crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Zalm crispy rice sandwich" src="{{ url_for('static', filename='images/zalm.png') }}"/>
</div>
<div class="menu-content">
<h3>Zalm crispy rice sandwich</h3>
<p>â‚¬ 7.00</p>
<div class="qty-box">
<label for="zalm-crispy-rice-sandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="zalm-crispy-rice-sandwich" type="button">-</button>
<select id="zalm-crispy-rice-sandwich" name="Zalm crispy rice sandwich"></select>
<button class="qty-plus add-button" data-target="zalm-crispy-rice-sandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Spicytuna -->
<div class="menu-row menu-item" data-name="Spicytuna crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Spicytuna crispy rice sandwich" src="{{ url_for('static', filename='images/zalm.png') }}"/>
</div>
<div class="menu-content">
<h3>Spicytuna crispy rice sandwich</h3>
<p>â‚¬ 7.00</p>
<div class="qty-box">
<label for="spicytuna-crispy-rice-sandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="spicytuna-crispy-rice-sandwich" type="button">-</button>
<select id="spicytuna-crispy-rice-sandwich" name="Spicytuna crispy rice sandwich"></select>
<button class="qty-plus add-button" data-target="spicytuna-crispy-rice-sandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Ebi -->
<!-- Ebi Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Ebi crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Ebi Crispy Rice Sandwich" src="{{ url_for('static', filename='images/Ebi.png') }}"/>
</div>
<div class="menu-content">
<h3>Ebi crispy rice sandwich</h3>
<p>â‚¬ 7.00</p>
<div class="qty-box">
<label for="ebiCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="ebiCrispyRiceSandwich" type="button">-</button>
<select id="ebiCrispyRiceSandwich" name="ebiCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="ebiCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Beef Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Beef crispy rice sandwich" data-packaging="0.2" data-price="7.5">
<div class="menu-img">
<img alt="Beef Crispy Rice Sandwich" src="{{ url_for('static', filename='images/beef-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef crispy rice sandwich</h3>
<p>â‚¬ 7.50</p>
<div class="qty-box">
<label for="beefCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="beefCrispyRiceSandwich" type="button">-</button>
<select id="beefCrispyRiceSandwich" name="beefCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="beefCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- California Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="California crispy rice sandwich" data-packaging="0.2" data-price="7.5">
<div class="menu-img">
<img alt="California Crispy Rice Sandwich" src="{{ url_for('static', filename='images/california-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>California crispy rice sandwich</h3>
<p>â‚¬ 7.50</p>
<div class="qty-box">
<label for="californiaCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="californiaCrispyRiceSandwich" type="button">-</button>
<select id="californiaCrispyRiceSandwich" name="californiaCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="californiaCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Chicken Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Chicken crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Chicken Crispy Rice Sandwich" src="{{ url_for('static', filename='images/chicken-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>Chicken crispy rice sandwich</h3>
<p>â‚¬ 7.00</p>
<div class="qty-box">
<label for="chickenCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="chickenCrispyRiceSandwich" type="button">-</button>
<select id="chickenCrispyRiceSandwich" name="chickenCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="chickenCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="snack">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Snack
</h2>
<div class="menu-row menu-item" data-name="Karaage" data-packaging="0.2" data-price="6.5">
<img alt="Karaage" class="menu-img" loading="lazy" src="{{ url_for('static', filename='images/karaage.png') }}">
<div class="menu-content">
<h3>Karaage (Japanse gefrituurde kip)</h3>
<p>â‚¬ 6.50</p>
<div class="qty-box">
<label for="snackCount">Aantal</label>
<button class="qty-minus remove-button" data-target="snackCount" type="button">-</button>
<select id="snackCount" name="snackCount"></select>
<button class="qty-plus add-button" data-target="snackCount" type="button">+</button>
</div>
</div>
</img></div>
<!-- Ebi Fry -->
<div class="menu-row menu-item" data-name="Ebi Fry â€“ 4 st" data-packaging="0.2" data-price="6.2">
  <div class="menu-img">
    <img alt="Ebi Fry" loading="lazy" src="{{ url_for('static', filename='images/EB.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Ebi Fry â€“ 4 st</h3>
    <p>â‚¬ 6.20</p>
    <div class="qty-box">
      <label for="ebiFryCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="ebiFryCount" type="button">-</button>
      <select id="ebiFryCount" name="ebiFryCount"></select>
      <button class="qty-plus add-button" data-target="ebiFryCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Spicy Crispy Chicken -->
<div class="menu-row menu-item" data-name="Spicy Crispy Chicken â€“ 5 st" data-packaging="0.2" data-price="5.5">
  <div class="menu-img">
    <img alt="Spicy Crispy Chicken" loading="lazy" src="{{ url_for('static', filename='images/karaage.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Spicy Crispy Chicken â€“ 5 st</h3>
    <p>â‚¬ 5.50</p>
    <div class="qty-box">
      <label for="spicyCrispyChickenCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="spicyCrispyChickenCount" type="button">-</button>
      <select id="spicyCrispyChickenCount" name="spicyCrispyChickenCount"></select>
      <button class="qty-plus add-button" data-target="spicyCrispyChickenCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Chicken Loempia -->
<div class="menu-row menu-item" data-name="Chicken Loempia â€“ 2 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Chicken Loempia" loading="lazy" src="{{ url_for('static', filename='images/KIPL.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Chicken Loempia â€“ 2 st</h3>
    <p>â‚¬ 5.00</p>
    <div class="qty-box">
      <label for="chickenLoempiaCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="chickenLoempiaCount" type="button">-</button>
      <select id="chickenLoempiaCount" name="chickenLoempiaCount"></select>
      <button class="qty-plus add-button" data-target="chickenLoempiaCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Gyoza -->
<div class="menu-row menu-item" data-name="Gyoza â€“ 5 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Gyoza" loading="lazy" src="{{ url_for('static', filename='images/GYO.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Gyoza â€“ 5 st</h3>
    <p>â‚¬ 5.00</p>
    <div class="qty-box">
      <label for="gyozaCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="gyozaCount" type="button">-</button>
      <select id="gyozaCount" name="gyozaCount"></select>
      <button class="qty-plus add-button" data-target="gyozaCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Inktvis Ringen -->
<div class="menu-row menu-item" data-name="Inktvis Ringen â€“ 5 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Inktvis Ringen" loading="lazy" src="{{ url_for('static', filename='images/INKT.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Inktvis Ringen â€“ 5 st</h3>
    <p>â‚¬ 5.00</p>
    <div class="qty-box">
      <label for="inktvisRingenCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="inktvisRingenCount" type="button">-</button>
      <select id="inktvisRingenCount" name="inktvisRingenCount"></select>
      <button class="qty-plus add-button" data-target="inktvisRingenCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Sesambal -->
<div class="menu-row menu-item" data-name="Sesambal â€“ 5 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Sasambal" loading="lazy" src="{{ url_for('static', filename='images/SEM.webp') }}">
    </img></div>
  <div class="menu-content">
    <h3>Sesambal â€“ 5 st</h3>
    <p>â‚¬ 4.00</p>
    <div class="qty-box">
      <label for="sesambalCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="sesambalCount" type="button">-</button>
      <select id="sesambalCount" name="sesambalCount"></select>
      <button class="qty-plus add-button" data-target="sesambalCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Yakitori -->
<div class="menu-row menu-item" data-name="Yakitori â€“ 4 st" data-packaging="0.2" data-price="6">
  <div class="menu-img">
    <img alt="Yakitori" loading="lazy" src="{{ url_for('static', filename='images/YAK.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Yakitori â€“ 4 st</h3>
    <p>â‚¬ 6.00</p>
    <div class="qty-box">
      <label for="yakitoriCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="yakitoriCount" type="button">-</button>
      <select id="yakitoriCount" name="yakitoriCount"></select>
      <button class="qty-plus add-button" data-target="yakitoriCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Mini Loempia -->
<div class="menu-row menu-item" data-name="Mini Loempia â€“ 6 st" data-packaging="0.2" data-price="3.5">
  <div class="menu-img">
    <img alt="Mini Loempia" loading="lazy" src="{{ url_for('static', filename='images/LOM.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Mini Loempia â€“ 6 st</h3>
    <p>â‚¬ 3.50</p>
    <div class="qty-box">
      <label for="miniLoempiaCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="miniLoempiaCount" type="button">-</button>
      <select id="miniLoempiaCount" name="miniLoempiaCount"></select>
      <button class="qty-plus add-button" data-target="miniLoempiaCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Edamame -->
<div class="menu-row menu-item" data-name="Edamame" data-packaging="0.2" data-price="4.5">
  <div class="menu-img">
    <img alt="Edamame" loading="lazy" src="{{ url_for('static', filename='images/EDA.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Edamame</h3>
    <p>â‚¬ 4.50</p>
    <div class="qty-box">
      <label for="edamameCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="edamameCount" type="button">-</button>
      <select id="edamameCount" name="edamameCount"></select>
      <button class="qty-plus add-button" data-target="edamameCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Kimchi Komkommer -->
<div class="menu-row menu-item" data-name="Kimchi Komkommer" data-packaging="0.2" data-price="4.5">
  <div class="menu-img">
    <img alt="Kimchi Komkommer" loading="lazy" src="{{ url_for('static', filename='images/KKK.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Kimchi Komkommer</h3>
    <p>â‚¬ 4.50</p>
    <div class="qty-box">
      <label for="kimchiKomkommerCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="kimchiKomkommerCount" type="button">-</button>
      <select id="kimchiKomkommerCount" name="kimchiKomkommerCount"></select>
      <button class="qty-plus add-button" data-target="kimchiKomkommerCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Kimchi Kool -->
<div class="menu-row menu-item" data-name="Kimchi Kool" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Kimchi Kool" loading="lazy" src="{{ url_for('static', filename='images/KIM.webp') }}">
    </img></div>
  <div class="menu-content">
    <h3>Kimchi Kool</h3>
    <p>â‚¬ 5.00</p>
    <div class="qty-box">
      <label for="kimchiKoolCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="kimchiKoolCount" type="button">-</button>
      <select id="kimchiKoolCount" name="kimchiKoolCount"></select>
      <button class="qty-plus add-button" data-target="kimchiKoolCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Zeewiersalade -->
<div class="menu-row menu-item" data-name="Zeewiersalade â€“ 100g" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Zeewiersalade" loading="lazy" src="{{ url_for('static', filename='images/ZEW.webp') }}">
    </img></div>
  <div class="menu-content">
    <h3>Zeewiersalade â€“ 100g</h3>
    <p>â‚¬ 5.00</p>
    <div class="qty-box">
      <label for="zeewiersaladeCount">Aantal</label>
      <button class="qty-minus remove-button" data-target="zeewiersaladeCount" type="button">-</button>
      <select id="zeewiersaladeCount" name="zeewiersaladeCount"></select>
      <button class="qty-plus add-button" data-target="zeewiersaladeCount" type="button">+</button>
    </div>
  </div>
</div>
</div>
</section>
<section id="dessert">
<div class="menu-group">
<!-- Mango -->
<div class="menu-row menu-item" data-name="Mochi Mango" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Mango" loading="lazy" src="{{ url_for('static', filename='images/mochi-mango.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi â€“ Mango</h3>
<p>â‚¬ 4.00</p>
<div class="qty-box">
<label for="mochiMangoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiMangoCount" type="button">-</button>
<select id="mochiMangoCount" name="mochiMangoCount"></select>
<button class="qty-plus add-button" data-target="mochiMangoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Aardbei -->
<div class="menu-row menu-item" data-name="Mochi Aardbei" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Aardbei" loading="lazy" src="{{ url_for('static', filename='images/mochi-aardbei.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi â€“ Aardbei</h3>
<p>â‚¬ 4.00</p>
<div class="qty-box">
<label for="mochiAardbeiCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiAardbeiCount" type="button">-</button>
<select id="mochiAardbeiCount" name="mochiAardbeiCount"></select>
<button class="qty-plus add-button" data-target="mochiAardbeiCount" type="button">+</button>
</div>
</div>
</div>
<!-- Matcha -->
<div class="menu-row menu-item" data-name="Mochi Matcha" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Matcha" loading="lazy" src="{{ url_for('static', filename='images/mochi-matcha.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi â€“ Matcha</h3>
<p>â‚¬ 4.00</p>
<div class="qty-box">
<label for="mochiMatchaCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiMatchaCount" type="button">-</button>
<select id="mochiMatchaCount" name="mochiMatchaCount"></select>
<button class="qty-plus add-button" data-target="mochiMatchaCount" type="button">+</button>
</div>
</div>
</div>
<!-- Pistachio -->
<div class="menu-row menu-item" data-name="Mochi Pistachio" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Pistachio" loading="lazy" src="{{ url_for('static', filename='images/mochi-pistachio.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi â€“ Pistachio</h3>
<p>â‚¬ 4.00</p>
<div class="qty-box">
<label for="mochiPistachioCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiPistachioCount" type="button">-</button>
<select id="mochiPistachioCount" name="mochiPistachioCount"></select>
<button class="qty-plus add-button" data-target="mochiPistachioCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="drinks">
<div class="menu-group">
<div class="menu-row menu-item" data-name="Cola" data-packaging="0.2" data-price="2">
<div class="menu-img">
<img alt="Cola" loading="lazy" src="https://via.placeholder.com/150">
</div>
<div class="menu-content">
<h3>Cola</h3>
<p>â‚¬ 2.00</p>
<div class="qty-box">
<label for="colaCount">Aantal</label>
<button class="qty-minus remove-button" data-target="colaCount" type="button">-</button>
<select id="colaCount" name="colaCount"></select>
<button class="qty-plus add-button" data-target="colaCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Cola Zero" data-packaging="0.2" data-price="2">
<div class="menu-img">
<img alt="Cola Zero" loading="lazy" src="https://via.placeholder.com/150">
</div>
<div class="menu-content">
<h3>Cola Zero</h3>
<p>â‚¬ 2.00</p>
<div class="qty-box">
<label for="colaZeroCount">Aantal</label>
<button class="qty-minus remove-button" data-target="colaZeroCount" type="button">-</button>
<select id="colaZeroCount" name="colaZeroCount"></select>
<button class="qty-plus add-button" data-target="colaZeroCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
    </div>
  </div>
  <div id="cartPanel" class="cart-panel">
    <button id="closeCartPanel" class="close-btn">Ã—</button>
    <div class="cart-area">
      <h2>Overzicht</h2>
      <ul id="cart"></ul>
      <div class="supply-row">
        <img alt="Stokjes" class="supply-img photo" src="../static/images/chopsticks.png"/>
        <div class="supply-content">
          <label for="chopstickCount">Aantal stokjes</label>
          <select id="chopstickCount" class="supply-select"></select>
        </div>
      </div>
      <div class="supply-row">
        <img alt="Sojasaus" class="supply-img photo" src="../static/images/soja saus.webp"/>
        <div class="supply-content">
          <label for="soyCount">Aantal sojasaus flesjes</label>
          <select id="soyCount" class="supply-select"></select>
        </div>
      </div>
      <div class="supply-row">
        <img alt="Gember" class="supply-img photo" src="../static/images/gember.webp"/>
        <div class="supply-content">
          <label for="gemberCount">Aantal gember porties</label>
          <select id="gemberCount" class="supply-select"></select>
        </div>
      </div>
      <div class="supply-row">
        <img alt="Wasabi" class="supply-img photo" src="../static/images/wasabi.webp"/>
        <div class="supply-content">
          <label for="wasabiCount">Aantal wasabi flesjes</label>
          <select id="wasabiCount" class="supply-select"></select>
        </div>
      </div>
      <div>Subtotaal: <span id="summarySubtotal">â‚¬0,00</span></div>
      <div>Verpakkingskosten: <span id="summaryPackaging">â‚¬0,00</span></div>
      <div id="summaryDeliveryRow" class="hidden">Bezorgkosten: <span id="summaryDelivery">â‚¬0,00</span></div>
      <div>
        Korting:
        <select id="discountType">
          <option value="amount">â‚¬</option>
          <option value="percent">%</option>
        </select>
        <input id="discountValue" type="number" value="0" min="0" step="0.01" />
        <span id="summaryDiscount">â‚¬0,00</span>
      </div>
      <div>
        Eigen Invoer:
        <input id="customPrice" type="number" min="0" step="0.01" />
        <button id="addCustomPrice" type="button">Toevoegen</button>
      </div>
      <div>BTW (9%): <span id="summaryBtw">â‚¬0,00</span></div>
      <div><strong>Totaal: <span id="total">â‚¬0,00</span></strong></div>
      <label for="remark" style="display:block;margin-top:10px;">Opmerking:</label>
      <textarea id="remark" rows="2" placeholder="Bijv. geen komkomer, extra mayo"></textarea>
    </div>
    <div class="checkout-panel">
      <section id="customer-info">
        <div class="delivery-options">
          <h2>Klantgegevens</h2>
        <label for="custName">Naam</label>
        <input id="custName" type="text" placeholder="Naam" />
        <label for="custPhone">Telefoonnummer</label>
        <input id="custPhone" type="tel" placeholder="Telefoonnummer" />
        <div class="order-type-switch">
          <label class="order-btn">
            <input type="radio" id="typePickup" name="orderType" value="pickup" checked />
            <span>Afhalen</span>
          </label>
          <label class="order-btn">
            <input type="radio" id="typeDelivery" name="orderType" value="delivery" />
            <span>Bezorging</span>
          </label>
        </div>
        <div id="pickupFields" style="margin-top:10px;">
          <label for="pickup_time">Pickup Tijd*</label>
          <select id="pickup_time"></select>
          <label for="pickupPayment">Betaalmethode*</label>
          <select id="pickupPayment">
            <option value="pin">Pin</option>
            <option value="cash">Contant</option>
            <option value="oprekening">Oprekening</option>
          </select>
        </div>
        <div id="deliveryFields" class="hidden" style="margin-top:10px;">
          <label for="postcode">Postcode*</label>
          <input id="postcode" type="text" placeholder="1234AB" />
          <label for="houseNumber">Huisnummer*</label>
          <input id="houseNumber" type="text" placeholder="1" />
          <label for="street">Straat*</label>
          <input id="street" type="text" placeholder="Straat" />
          <label for="city">Plaats*</label>
          <input id="city" type="text" placeholder="Plaats" />
          <label for="delivery_time">Bezorgtijd (optioneel)</label>
          <select id="delivery_time"></select>
          <label for="deliveryPayment">Betaalmethode*</label>
          <select id="deliveryPayment">
            <option value="pin">Pin</option>
            <option value="cash">Contant</option>
            <option value="oprekening">Oprekening</option>
          </select>
        </div>
        <div id="qrCodeContainer" class="hidden" style="text-align:center;margin-top:10px;">
          <p><strong>ğŸ“ Scan voor navigatie:</strong></p>
          <img id="qrCodePreview" src="" alt="QR Code" />
          <div id="mapsLinkContainer" style="margin-top:4px;"></div>
        </div>
        </div>
      </section>
      <button id="submitOrder">Submit Order</button>
    </div>
  </div>
</div>
<button id="cartToggle" class="cart-toggle">ğŸ›’<span id="cartCount" class="badge">0</span></button>
<button id="toggleToday" class="today-btn">
  Bestelling Vandaag
  <span class="badge-text-only today-badge"></span>
</button>
<button id="todayToggleMobile" class="today-toggle">
  <span class="emoji-wrapper">
    ğŸ“‹
    <span class="badge-text-only today-badge"></span>
  </span>
</button>



<audio id="notifySound" src="/sound/beep.mp3" preload="auto"></audio>

<div id="xBowlAddedModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); align-items:center; justify-content:center; z-index:1000;">
  <div style="background:white; padding:20px; border-radius:12px; text-align:center;">
    <p>Toegevoegd! Nieuwe maken?</p>
    <div style="display:flex; gap:10px; justify-content:center; margin-top:10px;">
      <button id="xBowlAgain">Ja, graag</button>
      <button id="xBowlClose">Nee, bedankt</button>
    </div>
  </div>
</div>

<script>
const cart = {};
const extras = {
  chopstickCount: { label: 'Stokjes', price: 0 },
  soyCount: { label: 'Sojasaus', price: 0 },
  gemberCount: { label: 'Gember', price: 0 },
  wasabiCount: { label: 'Wasabi', price: 0 }
};
let milkTeaPrice = 0;
let bubbleOptions = {base: [], smaak: [], topping: []};
let xbentoOptions = {main: [], side: [], rice: [], groente: []};
const xbowlBases=[
  {name:'Sushi rijst',price:4},
  {name:'IJsbergsla',price:5},
  {name:'Tempura crispy rijst',price:6}
];
const xbowlMains=[
  {name:'geen',price:0},
  {name:'Zalm',price:9},
  {name:'Tonijn',price:9},
  {name:'Gamba',price:8},
  {name:'Crispy chicken',price:8},
  {name:'Spicy crispy chicken',price:8},
  {name:'Teriyaki beef',price:9},
  {name:'Teriyaki chicken',price:9},
  {name:'Ribeye',price:9},
  {name:'Unagi',price:9},
  {name:'Spicy tuna',price:9},
  {name:'Krabstick',price:8}
];
const xbowlToppings=['geen','Komkommer','Avocado','Sojabonen','Mais','Zeewiersalade','Masago','Inari','Tamago'];
const XBOWL_TOPPING_PRICE=1.5;
let currentXBowlName="";

function getOptionPrice(cat,name){
  const opt=(bubbleOptions[cat]||[]).find(o=>o.name===name);
  return opt?parseFloat(opt.price):0;
}

function getBubbleTeaPrice(){
  const type=document.getElementById('bubbleType').value;
  const flavor=document.getElementById('bubbleFlavor').value;
  const topping=document.getElementById('bubbleTopping').value;
  return getOptionPrice('base',type)+getOptionPrice('smaak',flavor)+getOptionPrice('topping',topping);
}

function updateMilkTeaDisplay(){
  milkTeaPrice=getBubbleTeaPrice();
  const item=document.querySelector('.menu-item[data-name="Bubble Tea"]');
  if(item){
    item.dataset.price=milkTeaPrice;
    const p=item.querySelector('p');
    if(p) p.textContent=`â‚¬${milkTeaPrice.toFixed(2)}`;
  }
}

function getXbentoOptionPrice(cat,name){
  const opt=(xbentoOptions[cat]||[]).find(o=>o.name===name);
  return opt?parseFloat(opt.price):0;
}

function getXbentoPrice(){
  const main=document.getElementById('xBentoMain').value;
  const side=document.getElementById('xBentoSide').value;
  const rice=document.getElementById('xBentoRice').value;
  const veg=document.getElementById('xBentoVeg').value;
  return getXbentoOptionPrice('main',main)+getXbentoOptionPrice('side',side)+getXbentoOptionPrice('rice',rice)+getXbentoOptionPrice('groente',veg);
}

function updateXbentoDisplay(){
  const price=getXbentoPrice();
  const item=document.querySelector('.menu-item[data-name="Xbento"]');
  if(item){
    item.dataset.price=price;
    const p=item.querySelector('p');
    if(p) p.textContent=`â‚¬${price.toFixed(2)}`;
  }
}

function getXBowlSelections(){
  const baseSel=document.getElementById('xBowlBase');
  const baseOpt=baseSel?baseSel.selectedOptions[0]:null;
  const mains=Array.from(document.querySelectorAll('#xBowlMains select')).map(s=>s.selectedOptions[0]).filter(o=>o&&o.value);
  const toppings=Array.from(document.querySelectorAll('#xBowlToppings select')).map(s=>s.value).filter(v=>v);
  return{baseOpt,mains,toppings};
}

function updateXBowlDisplay(){
  const {baseOpt,mains,toppings}=getXBowlSelections();
  let price=0;
  if(baseOpt&&baseOpt.dataset.price) price+=parseFloat(baseOpt.dataset.price);
  mains.forEach(o=>{price+=parseFloat(o.dataset.price||0);});
  const paidTops=toppings.filter(t=>t.toLowerCase()!=='geen');
  price+=paidTops.length*XBOWL_TOPPING_PRICE;
  const item=document.querySelector('.menu-item[data-name="X-Bowl"]');
  if(item){
    item.dataset.price=price;
    const p=document.getElementById('xBowlPrice');
    if(p) p.textContent=price?`â‚¬ ${price.toFixed(2)}`:'Prijs afhankelijk van keuzes';
    const info=document.getElementById('xBowlSummary');
    if(info){
      const mainNames=mains.map(o=>o.value).join(', ');
      const topNames=toppings.join(', ');
      let parts=[];
      if(baseOpt&&baseOpt.value) parts.push(baseOpt.value);
      if(mainNames) parts.push(mainNames);
      if(topNames) parts.push(topNames);
      const text=parts.join(' | ');
      info.textContent=text?`${text} - â‚¬ ${price.toFixed(2)}`:'';
    }
  }
}

function getXBowlName(){
  const {baseOpt,mains,toppings}=getXBowlSelections();
  if(!baseOpt||!baseOpt.value||mains.length===0) return '';
  const mainNames=mains.map(o=>o.value).join(', ');
  const topNames=toppings.join(', ');
  return `X-Bowl (${baseOpt.value} | ${mainNames}${topNames?' | '+topNames:''})`;
}

function updateXBowlControls(){
  const wrap=document.getElementById('xBowlNewWrap');
  const qty=parseInt(document.getElementById('xBowlQty').value||0);
  if(isXbowlValid()&&qty>0) wrap.classList.remove('hidden');
  else wrap.classList.add('hidden');
}

function changeXbowlQty(delta){
  const sel=document.getElementById('xBowlQty');
  let val=parseInt(sel.value||0);
  const name=getXBowlName();
  if(!name) return;
  val=Math.max(0,Math.min(20,val+delta));
  sel.value=val;
  updateXBowlDisplay();
  const price=parseFloat(document.querySelector('.menu-item[data-name="X-Bowl"]').dataset.price||0);
  if(currentXBowlName && currentXBowlName!==name && cart[currentXBowlName]){
    delete cart[currentXBowlName];
  }
  setQty(name,price,val,0.2);
  currentXBowlName=name;
  updateXBowlControls();
  if(delta>0 && val>0) showXBowlModal();
}

function createXBowlMainSelect(){
  const div=document.createElement('div');
  const sel=document.createElement('select');
  sel.innerHTML='<option value="">Hoofdingredient</option>';
  xbowlMains.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.dataset.price=o.price;opt.textContent=o.name;sel.appendChild(opt);});
  const del=document.createElement('button');del.type='button';del.textContent='âŒ';
  del.addEventListener('click',()=>{div.remove();ensureXBowlMain();updateXBowlDisplay();updateXBowlControls();changeXbowlQty(0);});
  sel.addEventListener('change',()=>{
    const val = sel.value.toLowerCase();
    if(sel.value && val !== 'geen' && div===document.querySelector('#xBowlMains').lastElementChild){
      if(confirm('Wil je extra portie?')){
        document.getElementById('xBowlMains').appendChild(createXBowlMainSelect());
      }
    }
    updateXBowlDisplay();
    updateXBowlControls();
    changeXbowlQty(0);
  });
  div.appendChild(sel);div.appendChild(del);return div;
}

function createXBowlToppingSelect(){
  const div=document.createElement('div');
  const sel=document.createElement('select');
  sel.innerHTML='<option value="">Topping</option>';
  xbowlToppings.forEach(n=>{const opt=document.createElement('option');opt.value=n;opt.textContent=n;sel.appendChild(opt);});
  const del=document.createElement('button');del.type='button';del.textContent='âŒ';
  del.addEventListener('click',()=>{div.remove();ensureXBowlTopping();updateXBowlDisplay();updateXBowlControls();changeXbowlQty(0);});
  sel.addEventListener('change',()=>{
    const val = sel.value.toLowerCase();
    if(sel.value && val !== 'geen' && div===document.querySelector('#xBowlToppings').lastElementChild){
      if(confirm('Wil je extra topping toevoegen?')){
        document.getElementById('xBowlToppings').appendChild(createXBowlToppingSelect());
      }
    }
    updateXBowlDisplay();
    updateXBowlControls();
    changeXbowlQty(0);
  });
  div.appendChild(sel);div.appendChild(del);return div;
}

function ensureXBowlMain(){
  const wrap=document.getElementById('xBowlMains');
  if(!wrap.querySelector('select')) wrap.appendChild(createXBowlMainSelect());
}

function ensureXBowlTopping(){
  const wrap=document.getElementById('xBowlToppings');
  if(!wrap.querySelector('select')) wrap.appendChild(createXBowlToppingSelect());
}

function clearXBowlSet(){
  document.getElementById('xBowlBase').value='';
  document.getElementById('xBowlMains').innerHTML='';
  document.getElementById('xBowlToppings').innerHTML='';
  document.getElementById('xBowlQty').value=0;
  ensureXBowlMain();
  ensureXBowlTopping();
  updateXBowlDisplay();
  updateXBowlControls();
  currentXBowlName="";
}

function applyCrispyPrices(prices){
  const map={
    'Zalm crispy rice sandwich': parseFloat(prices.price_zalm_crispy_rice_sandwich),
    'Spicytuna crispy rice sandwich': parseFloat(prices.price_spicytuna_crispy_rice_sandwich),
    'Ebi crispy rice sandwich': parseFloat(prices.price_ebi_crispy_rice_sandwich),
    'Beef crispy rice sandwich': parseFloat(prices.price_beef_crispy_rice_sandwich),
    'California crispy rice sandwich': parseFloat(prices.price_california_crispy_rice_sandwich),
    'Chicken crispy rice sandwich': parseFloat(prices.price_chicken_crispy_rice_sandwich)
  };
  Object.entries(map).forEach(([name,price])=>{
    if(isNaN(price)) return;
    const el=document.querySelector(`.menu-item[data-name="${name}"]`);
    if(el){
      el.dataset.price=price;
      const pe=el.querySelector('p');
      if(pe) pe.textContent=`â‚¬${price.toFixed(2)}`;
    }
  });
}

function changeBubbleQty(delta){
  const sel=document.getElementById('bubbleTeaQty');
  let val=parseInt(sel.value||0);
  val=Math.max(0,Math.min(20,val+delta));
  sel.value=val;
  const type=document.getElementById('bubbleType').value;
  const flavor=document.getElementById('bubbleFlavor').value;
  const topping=document.getElementById('bubbleTopping').value;
  if(!type||!flavor||!topping) return;
  const name=`Bubble Tea (${type}, ${flavor}, ${topping})`;
  const price=getBubbleTeaPrice();
  setQty(name,price,val,0.2);
}

function changeXbentoQty(delta){
  const sel=document.getElementById('xBentoQty');
  let val=parseInt(sel.value||0);
  const main=document.getElementById('xBentoMain').value;
  const side=document.getElementById('xBentoSide').value;
  const rice=document.getElementById('xBentoRice').value;
  const veg=document.getElementById('xBentoVeg').value;
  if(!main||!side||!rice||!veg) return;
  val=Math.max(0,Math.min(20,val+delta));
  sel.value=val;
  const price=getXbentoPrice();
  const name=`Xbento (${main}, ${side}, ${rice}, ${veg})`;
  setQty(name,price,val,0.2);
}

function changeOmakaseQty(delta){
  const sel=document.getElementById('sushiBentoCount');
  let val=parseInt(sel.value||0);
  val=Math.max(0,Math.min(20,val+delta));
  sel.value=val;
  updateOmakasePrefs();
}

function updateOmakasePrefs(){
  const qty=parseInt(document.getElementById('sushiBentoCount').value||0);
  const container=document.getElementById('omakasePrefs');
  container.innerHTML='';

  const existing=(cart['Bento Sushi Omakase']&&cart['Bento Sushi Omakase'].prefs)||[];
  for(let i=1;i<=qty;i++){
    const sel=document.createElement('select');
    ['Geen voorkeur','Alleen vis','Alleen vlees','Alleen veggie'].forEach(opt=>{
      const o=document.createElement('option');o.value=opt;o.textContent=opt;sel.appendChild(o);});
    sel.value=existing[i-1]||'Geen voorkeur';
    sel.id=`omakasePref${i}`;
    sel.addEventListener('change',setOmakaseQty);
    container.appendChild(sel);
  }
  setOmakaseQty();
}

function setOmakaseQty(){
  const qty=parseInt(document.getElementById('sushiBentoCount').value||0);
  const prefs=[];

  for(let i=1;i<=qty;i++){
    prefs.push(document.getElementById(`omakasePref${i}`).value);
  }
  const price=parseFloat(document.querySelector('[data-name="Bento Sushi Omakase"]').dataset.price);
  setQty('Bento Sushi Omakase',price,qty,0.2,prefs);
}

function changeDragonQty(delta){
  const sel=document.getElementById('dragonRollCount');
  let val=parseInt(sel.value||0);
  val=Math.max(0,Math.min(20,val+delta));
  sel.value=val;
  updateDragonPrefs();
}

function updateDragonPrefs(){
  const qty=parseInt(document.getElementById('dragonRollCount').value||0);
  const container=document.getElementById('dragonPrefs');
  container.innerHTML='';

  const existing=(cart['Dragon Roll Omakase']&&cart['Dragon Roll Omakase'].prefs)||[];
  for(let i=1;i<=qty;i++){
    const sel=document.createElement('select');
    ['Geen voorkeur','Alleen vis','Alleen vlees'].forEach(opt=>{
      const o=document.createElement('option');o.value=opt;o.textContent=opt;sel.appendChild(o);});
    sel.value=existing[i-1]||'Geen voorkeur';
    sel.id=`dragonPref${i}`;
    sel.addEventListener('change',setDragonQty);
    container.appendChild(sel);
  }
  setDragonQty();
}

function setDragonQty(){
  const qty=parseInt(document.getElementById('dragonRollCount').value||0);
  const prefs=[];
  for(let i=1;i<=qty;i++){
    prefs.push(document.getElementById(`dragonPref${i}`).value);
  }
  const price=parseFloat(document.querySelector('[data-name="Dragon Roll Omakase"]').dataset.price);
  setQty('Dragon Roll Omakase',price,qty,0.2,prefs);
}

function isRamenValid(code){
  return document.getElementById(code+'Base').value && document.getElementById(code+'Smaak').value;
}

function isXbowlValid(){
  const base=document.getElementById('xBowlBase').value;
  const hasMain=Array.from(document.querySelectorAll('#xBowlMains select')).some(s=>s.value);
  return base&&hasMain;
}

function changeRamenQty(code,delta){
  const sel=document.getElementById(code+'Qty');
  let val=parseInt(sel.value||0);
  val=Math.max(0,Math.min(20,val+delta));
  sel.value=val;
  const item=document.querySelector(`.menu-item[data-code="${code}"]`);
  const base=document.getElementById(code+'Base').value;
  const smaak=document.getElementById(code+'Smaak').value;
  if(!base||!smaak) return;
  const name=item.dataset.name;
  const price=parseFloat(item.dataset.price);
  const pack=parseFloat(item.dataset.packaging||0);
  const fullName=`${name} - ${base} - ${smaak}`;
  setQty(fullName,price,val,pack);
}
function populateSelect(sel){
  for(let i=0;i<=20;i++){ const opt=document.createElement('option'); opt.value=i; opt.textContent=i; sel.appendChild(opt); }
}
function createSelect(current,onChange){
  const sel=document.createElement('select');
  for(let i=0;i<=20;i++){ const opt=document.createElement('option'); opt.value=i; opt.textContent=i; if(i===current) opt.selected=true; sel.appendChild(opt); }
  sel.addEventListener('change',()=>onChange(parseInt(sel.value))); return sel;
}
function setQty(name,price,qty,packaging=0,prefs=null){
  if(qty===0){
    delete cart[name];
  } else {
    cart[name]={price,qty,packaging};
    if(prefs) cart[name].prefs=prefs; else if(cart[name]&&cart[name].prefs) delete cart[name].prefs;
  }
  updateCart();
}
function updateCart(){
  const list=document.getElementById('cart');
  list.innerHTML='';
  let subtotal=0;
  let packagingTotal=0;
  let count=0;
  Object.entries(cart).forEach(([name,item])=>{
    const li=document.createElement('li');
    const sel=createSelect(item.qty,val=>{
      const menuItem=document.querySelector(`[data-name="${name}"]`);
      if(menuItem){
        const qtyInput=menuItem.querySelector('select');
        if(qtyInput) qtyInput.value=val;
      }
      setQty(name,item.price,val,item.packaging,item.prefs);
      if(name==='Bento Sushi Omakase'){
        document.getElementById('sushiBentoCount').value=val;
        updateOmakasePrefs();
      } else if(name==='Dragon Roll Omakase'){
        document.getElementById('dragonRollCount').value=val;
        updateDragonPrefs();
      }
    });
    const rowTotal=item.qty*item.price;
    const displayName=item.displayName||name;
    li.textContent=`${displayName} - â‚¬${rowTotal.toFixed(2)} `;
    if(item.custom){
      const delBtn=document.createElement('button');
      delBtn.textContent='ğŸ—‘';
      delBtn.addEventListener('click',()=>{ delete cart[name]; updateCart(); });
      li.appendChild(delBtn);
    }else{
      li.appendChild(sel);
    }
    if(item.prefs){
      const title=document.createElement('div');
      title.textContent='Voorkeur:';
      const ul=document.createElement('ul');
      item.prefs.forEach((p,i)=>{
        const liP=document.createElement('li');
        liP.textContent=`${i+1}. ${p}`;
        ul.appendChild(liP);
      });
      li.appendChild(title);
      li.appendChild(ul);
    }
    list.appendChild(li);
    if(item.qty>0){
      subtotal+=rowTotal;
      packagingTotal+=(item.packaging||0)*item.qty;
    }
    count+=item.qty;
  });

  const delivery=document.getElementById('typeDelivery').checked ? 2.5 : 0;
  const discountType=document.getElementById('discountType').value;
  let discountVal=parseFloat(document.getElementById('discountValue').value)||0;
  let discount=0;
  if(discountType==='amount'){ discount=Math.min(discountVal,subtotal); }
  else if(discountType==='percent'){ discount=Math.min(discountVal,100)/100*subtotal; }
  if(discount<0||isNaN(discount)) discount=0;

  const total = subtotal + packagingTotal + delivery - discount;
  const btwBase = delivery ? total - delivery : total;
  const btw = btwBase * 0.09;

  const fmt=n=>`â‚¬${n.toFixed(2).replace('.',',')}`;
  document.getElementById('summarySubtotal').textContent=fmt(subtotal);
  document.getElementById('summaryPackaging').textContent=fmt(packagingTotal);
  document.getElementById('summaryDelivery').textContent=fmt(delivery);
  document.getElementById('summaryDeliveryRow').classList.toggle('hidden',!delivery);
  document.getElementById('summaryDiscount').textContent=discount ? `- ${fmt(discount)}` : 'â‚¬0,00';
  document.getElementById('summaryBtw').textContent=fmt(btw);
  document.getElementById('total').textContent=fmt(total);

  const badge=document.getElementById('cartCount');
  if(badge) badge.textContent=count;
}

function addCustomPrice(){
  const input=document.getElementById('customPrice');
  const val=parseFloat(input.value);
  if(isNaN(val)||val<=0) return;
  const key='custom_'+Date.now();
  cart[key]={price:val,qty:1,custom:true,displayName:'Eigen Invoer'};
  input.value='';
  updateCart();
}

document.addEventListener('DOMContentLoaded',()=>{
  const skip=['bubbleTeaQty','bubbleType','bubbleFlavor','bubbleTopping','xBentoMain','xBentoSide','xBentoRice','xBentoVeg','xBowlBase','xBowlQty',
    'ebiBase','ebiSmaak','ebiQty','chickenBase','chickenSmaak','chickenQty','beefBase','beefSmaak','beefQty',
    'ribeyeBase','ribeyeSmaak','ribeyeQty','chasiuBase','chasiuSmaak','chasiuQty'];
  document.querySelectorAll('.menu-item select').forEach(sel=>{
    if(!skip.includes(sel.id) && !sel.closest('#xBowlMains') && !sel.closest('#xBowlToppings')){
      populateSelect(sel);
      const parent=sel.closest('.menu-item');
      const name=parent.dataset.name;
      const price=parseFloat(parent.dataset.price);
      const pack=parseFloat(parent.dataset.packaging||0);
      if(name==='Bento Sushi Omakase'){
        sel.addEventListener('change',()=>changeOmakaseQty(0));
      } else if(name==='Dragon Roll Omakase'){
        sel.addEventListener('change',()=>changeDragonQty(0));
      } else {
        sel.addEventListener('change',()=>{ setQty(name,price,parseInt(sel.value),pack); });
      }
    }
  });

  ['bubbleTeaQty','xBentoQty','xBowlQty'].forEach(id=>{
    const s=document.getElementById(id);
    for(let i=0;i<=20;i++){const opt=document.createElement('option');opt.value=i;opt.text=i;s.appendChild(opt);} s.value=0;
  });
  ['bubbleType','bubbleFlavor','bubbleTopping'].forEach(id=>{
    document.getElementById(id).addEventListener('change',()=>{updateMilkTeaDisplay();});
  });
  ['xBentoMain','xBentoSide','xBentoRice','xBentoVeg'].forEach(id=>{
    document.getElementById(id).addEventListener('change',()=>{updateXbentoDisplay();});
  });

  document.querySelector('.qty-plus[data-target="bubbleTeaQty"]').addEventListener('click',()=>{
    if(!document.getElementById('bubbleType').value||!document.getElementById('bubbleFlavor').value||!document.getElementById('bubbleTopping').value){alert('ğŸ§‹ Kies eerst type, smaak en topping voor je bubble tea.');return;}changeBubbleQty(1);});
  document.querySelector('.qty-minus[data-target="bubbleTeaQty"]').addEventListener('click',()=>{
    if(!document.getElementById('bubbleType').value||!document.getElementById('bubbleFlavor').value||!document.getElementById('bubbleTopping').value){alert('ğŸ§‹ Kies eerst type, smaak en topping voor je bubble tea.');return;}changeBubbleQty(-1);});
  document.getElementById('bubbleTeaQty').addEventListener('change',()=>{if(!document.getElementById('bubbleType').value||!document.getElementById('bubbleFlavor').value||!document.getElementById('bubbleTopping').value){alert('ğŸ§‹ Kies eerst type, smaak en topping voor je bubble tea.');document.getElementById('bubbleTeaQty').value=0;return;}changeBubbleQty(0);});

  document.querySelector('.qty-plus[data-target="xBentoQty"]').addEventListener('click',()=>{
    if(!document.getElementById('xBentoMain').value||!document.getElementById('xBentoSide').value||!document.getElementById('xBentoRice').value||!document.getElementById('xBentoVeg').value){alert('ğŸ± Kies eerst hoofdgerecht, bijgerecht, rijstsoort en groente voor je Xbento.');return;}changeXbentoQty(1);});
  document.querySelector('.qty-minus[data-target="xBentoQty"]').addEventListener('click',()=>{
    if(!document.getElementById('xBentoMain').value||!document.getElementById('xBentoSide').value||!document.getElementById('xBentoRice').value||!document.getElementById('xBentoVeg').value){alert('ğŸ± Kies eerst hoofdgerecht, bijgerecht, rijstsoort en groente voor je Xbento.');return;}changeXbentoQty(-1);});
  document.getElementById('xBentoQty').addEventListener('change',()=>{if(!document.getElementById('xBentoMain').value||!document.getElementById('xBentoSide').value||!document.getElementById('xBentoRice').value||!document.getElementById('xBentoVeg').value){alert('ğŸ± Kies eerst hoofdgerecht, bijgerecht, rijstsoort en groente voor je Xbento.');document.getElementById('xBentoQty').value=0;return;}changeXbentoQty(0);});

  ensureXBowlMain();
  ensureXBowlTopping();
  document.getElementById('xBowlBase').addEventListener('change',()=>{updateXBowlDisplay();updateXBowlControls();changeXbowlQty(0);});
  document.getElementById('xBowlNew').addEventListener('click',clearXBowlSet);
  document.querySelector('.qty-plus[data-target="xBowlQty"]').addEventListener('click',()=>{if(!isXbowlValid()){alert('ğŸ¥— Basis en hoofdingrediÃ«nt vereist.');return;}changeXbowlQty(1);});
  document.querySelector('.qty-minus[data-target="xBowlQty"]').addEventListener('click',()=>{if(!isXbowlValid()){alert('ğŸ¥— Basis en hoofdingrediÃ«nt vereist.');return;}changeXbowlQty(-1);});
  document.getElementById('xBowlQty').addEventListener('change',()=>{if(!isXbowlValid()){alert('ğŸ¥— Basis en hoofdingrediÃ«nt vereist.');document.getElementById('xBowlQty').value=0;return;}changeXbowlQty(0);});

  const ramenIds=['ebiQty','chickenQty','beefQty','ribeyeQty','chasiuQty'];
  document.querySelectorAll('.qty-plus').forEach(btn=>{
    if(['bubbleTeaQty','xBentoQty','xBowlQty',...ramenIds].includes(btn.dataset.target)) return;
    btn.addEventListener('click',()=>{
      const sel=document.getElementById(btn.dataset.target);
      let val=parseInt(sel.value);
      if(val<20) val++;
      sel.value=val;
      const parent=sel.closest('.menu-item');
      if(parent.dataset.name==='Bento Sushi Omakase'){
        changeOmakaseQty(0);
      } else if(parent.dataset.name==='Dragon Roll Omakase'){
        changeDragonQty(0);
      } else {
        setQty(parent.dataset.name,parseFloat(parent.dataset.price),val,parseFloat(parent.dataset.packaging||0));
      }
    });
  });
  document.querySelectorAll('.qty-minus').forEach(btn=>{
    if(['bubbleTeaQty','xBentoQty','xBowlQty',...ramenIds].includes(btn.dataset.target)) return;
    btn.addEventListener('click',()=>{
      const sel=document.getElementById(btn.dataset.target);
      let val=parseInt(sel.value);
      if(val>0) val--;
      sel.value=val;
      const parent=sel.closest('.menu-item');
      if(parent.dataset.name==='Bento Sushi Omakase'){
        changeOmakaseQty(0);
      } else if(parent.dataset.name==='Dragon Roll Omakase'){
        changeDragonQty(0);
      } else {
        setQty(parent.dataset.name,parseFloat(parent.dataset.price),val,parseFloat(parent.dataset.packaging||0));
      }
    });
  });

  const ramenCodes=['ebi','chicken','beef','ribeye','chasiu'];
  ramenCodes.forEach(code=>{
    const qty=document.getElementById(code+'Qty');
    populateSelect(qty);
    qty.value=0;
    document.querySelector(`.qty-plus[data-target="${code}Qty"]`).addEventListener('click',()=>{
      if(!isRamenValid(code)){alert('ğŸœ Kies eerst base en smaak voor je ramen.');return;}
      changeRamenQty(code,1);
    });
    document.querySelector(`.qty-minus[data-target="${code}Qty"]`).addEventListener('click',()=>{
      if(!isRamenValid(code)){alert('ğŸœ Kies eerst base en smaak voor je ramen.');return;}
      changeRamenQty(code,-1);
    });
    qty.addEventListener('change',()=>{
      if(!isRamenValid(code)){alert('ğŸœ Kies eerst base en smaak voor je ramen.');qty.value=0;return;}
      changeRamenQty(code,0);
    });
    document.getElementById(code+'New').addEventListener('click',()=>{
      document.getElementById(code+'Base').value='';
      document.getElementById(code+'Smaak').value='';
      qty.value=0;
    });
  });
  ['chopstickCount','soyCount','gemberCount','wasabiCount'].forEach(id=>{
    populateSelect(document.getElementById(id));
    document.getElementById(id).addEventListener('change',updateCart);
  });
  document.getElementById('discountType').addEventListener('change',updateCart);
  document.getElementById('discountValue').addEventListener('input',updateCart);
  const addCustomBtn=document.getElementById('addCustomPrice');
  if(addCustomBtn){
    addCustomBtn.addEventListener('click',addCustomPrice);
  }
  const toggleTodayBtn = document.getElementById('toggleToday');
  if (toggleTodayBtn) {
    toggleTodayBtn.addEventListener('click', toggleToday);
  }
  const todayToggleMobile=document.getElementById('todayToggleMobile');
  if(todayToggleMobile){
    todayToggleMobile.addEventListener('click',toggleToday);
  }
  document.getElementById('closeToday').addEventListener('click',toggleToday);
  document.getElementById('typePickup').addEventListener('change',toggleAddress);
  document.getElementById('typeDelivery').addEventListener('change',toggleAddress);
  document.getElementById('postcode').addEventListener('blur',fetchAddress);
  document.getElementById('houseNumber').addEventListener('blur',fetchAddress);
  document.getElementById('postcode').addEventListener('blur',updateQRCode);
  document.getElementById('houseNumber').addEventListener('blur',updateQRCode);
  document.getElementById('street').addEventListener('blur',updateQRCode);
  document.getElementById('city').addEventListener('blur',updateQRCode);
  document.getElementById('submitOrder').addEventListener('click',submitOrder);
  const cartToggle=document.getElementById('cartToggle');
  const cartPanel=document.getElementById('cartPanel');
  const closeCart=document.getElementById('closeCartPanel');
  if(cartToggle){
    cartToggle.addEventListener('click',()=>{
      cartPanel.classList.toggle('open');
    });
  }
  if(closeCart){
    closeCart.addEventListener('click',()=>cartPanel.classList.remove('open'));
  }
  if(cartPanel){
    cartPanel.addEventListener('click',e=>{
      if(e.target===cartPanel) cartPanel.classList.remove('open');
    });
  }
  updateOmakasePrefs();
  updateDragonPrefs();
  updateCart();
  toggleAddress();
  updateTodayBadge();
  // ğŸ”Š è‡ªåŠ¨è§£é” AudioContext
  if (audioCtx.state === 'suspended') {
    audioCtx.resume().catch(() => {});
  }

});

function toggleToday(){
  const panel=document.getElementById('todayOrders');
  panel.classList.toggle('visible');
  const open = panel.classList.contains('visible');
  document.body.classList.toggle('today-open', open);
  if(open){
    fetchOrders();
    newOrderCount = 0;
    hasNewOrder = false;
    updateTabTitle();
  }
  updateTodayBadge();
}

// æå‰åŠ è½½éŸ³é¢‘
let beepAudio = new Audio('beep.mp3');

// åœ¨ Electron ä¸­è‡ªåŠ¨è§£é”éŸ³é¢‘æ’­æ”¾
document.addEventListener('DOMContentLoaded', () => {
  beepAudio.play().then(() => {
    beepAudio.pause();
    beepAudio.currentTime = 0;
    console.log('ğŸ”Š Beep audio å·²è§£é”');
  }).catch(() => {
    console.warn('ğŸ”‡ æµè§ˆå™¨æ‹¦æˆªäº†éŸ³é¢‘æ’­æ”¾');
  });
});

// ä¹‹åä»»ä½•æ—¶å€™å¯ä»¥ç›´æ¥è°ƒç”¨ beep()ï¼Œæ— éœ€ç”¨æˆ·å†æ¬¡ç‚¹å‡»
function beep() {
  beepAudio.currentTime = 0;
  beepAudio.play();
}




  
function showTodayOrders(){
  const panel=document.getElementById('todayOrders');
  if(!panel.classList.contains('visible')){
    panel.classList.add('visible');
    document.body.classList.add('today-open');
    fetchOrders();
  }
}

function toggleAddress(){
  const delivery=document.getElementById('typeDelivery').checked;
  document.getElementById('pickupFields').classList.toggle('hidden',delivery);
  document.getElementById('deliveryFields').classList.toggle('hidden',!delivery);
  document.getElementById('pickup_time').required=!delivery?true:false;
  document.getElementById('pickupPayment').required=!delivery?true:false;
  document.getElementById('postcode').required=delivery;
  document.getElementById('houseNumber').required=delivery;
  document.getElementById('deliveryPayment').required=delivery;
  if(!delivery){
    populateTimeOptions('pickup_time',30);
    document.getElementById('qrCodeContainer').classList.add('hidden');
  } else {
    populateTimeOptions('delivery_time',45);
    updateQRCode();
  }
  updateCart();
}
async function fetchAddress(){
  const pc=document.getElementById('postcode').value.trim();
  const num=document.getElementById('houseNumber').value.trim();
  if(pc && num){
    const url=`https://api.postcodeapi.nu/v3/lookup/${encodeURIComponent(pc)}/${encodeURIComponent(num)}`;
    try{
      const res=await fetch(url,{headers:{'X-Api-Key':'juW6MEgEeL2BEM0rInEtB5a15BqXjWwO3YqrdH0z'}});
      if(res.ok){
        const d=await res.json();
        if(d.street) document.getElementById('street').value=d.street;
        if(d.city) document.getElementById('city').value=d.city;
      }
    }catch(e){console.warn('Adres ophalen mislukt');}
    updateQRCode();
  }
}
function updateQRCode(){
  const street=document.getElementById('street').value.trim();
  const house=document.getElementById('houseNumber').value.trim();
  const pc=document.getElementById('postcode').value.trim();
  const city=document.getElementById('city').value.trim();
  const container=document.getElementById('qrCodeContainer');
  const img=document.getElementById('qrCodePreview');
  const linkContainer=document.getElementById('mapsLinkContainer');
  if(street && house && pc && city){
    const address=`${street} ${house}, ${pc} ${city}`;
    const googleMapsLink=`https://www.google.com/maps?q=${encodeURIComponent(address)}`;
    const qrCodeUrl=`https://chart.googleapis.com/chart?cht=qr&chs=200x200&chl=${encodeURIComponent(googleMapsLink)}`;
    img.src=qrCodeUrl;
    linkContainer.innerHTML=`<a href="${googleMapsLink}" target="_blank" style="color: var(--accent-color); text-decoration: underline;">Open in Google Maps</a>`;
    container.classList.remove('hidden');
  }else{
    img.src='';
    linkContainer.innerHTML='';
    container.classList.add('hidden');
  }
}

function clearForm(){
  ['custName','custPhone','pickup_time','delivery_time','postcode','houseNumber','street','city'].forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.value='';
  });
  ['pickupPayment','deliveryPayment','chopstickCount','soyCount','gemberCount','wasabiCount'].forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.value=el.options[0].value;
  });
  document.getElementById('remark').value='';
  document.querySelectorAll('.product-list select').forEach(sel=>{sel.value=0;});
  for(const k in cart) delete cart[k];
  updateCart();
  toggleAddress();
}

function generateOrderNumber(){
  const now = new Date();
  const date = now.toISOString().slice(0,10).replace(/-/g,'');
  const rand = Math.random().toString(36).substring(2,6).toUpperCase();
  return `NV${date}-${rand}`;
}
function submitOrder() {
  const name = document.getElementById('custName').value.trim() || 'Guest';
  const phone = document.getElementById('custPhone').value.trim();

  const delivery = document.getElementById('typeDelivery').checked;



  if (Object.keys(cart).length === 0) {
    alert('Geen producten geselecteerd.');
    return;
  }

  const remark = document.getElementById('remark').value.trim();

  let orderText = Object.entries(cart).map(([name, item]) => {
    let line = `${name} x ${item.qty} (â‚¬${(item.qty * item.price).toFixed(2)})`;
    if(item.prefs){
      const pref = item.prefs.map((p,i)=>`${i+1}. ${p}`).join(' | ');
      line += ` [${pref}]`;
    }
    return line;
  }).join(', ');
  Object.keys(extras).forEach(id => {
    const qty = parseInt(document.getElementById(id).value || 0);
    if (qty > 0) orderText += `, ${extras[id].label} x ${qty}`;
  });
  if (remark) orderText += `, Opmerking: ${remark}`;

  const itemsToSend = { ...cart };
  Object.keys(extras).forEach(id => {
    const qty = parseInt(document.getElementById(id).value || 0);
    if (qty > 0) itemsToSend[extras[id].label] = { price: 0, qty };
  });

  const orderNumber = generateOrderNumber();

  // âœ… è·å–ç»“è´¦æ˜ç»†æ•°æ®
  const subtotal = Object.values(cart).reduce((sum, item) => sum + item.price * item.qty, 0);
  const packagingTotal = Object.values(cart).reduce((sum, item) => sum + (item.packaging || 0) * item.qty, 0);
  const deliveryCost = delivery ? 2.5 : 0;
  const discountType = document.getElementById('discountType').value;
  const discountVal = parseFloat(document.getElementById('discountValue').value) || 0;
  let discount = 0;
  if (discountType === 'amount') {
    discount = Math.min(discountVal, subtotal);
  } else if (discountType === 'percent') {
    discount = Math.min(100, discountVal) / 100 * subtotal;
  }
  const totalBeforeBtw = subtotal + packagingTotal + deliveryCost - discount;
  const btwBase = delivery ? totalBeforeBtw - deliveryCost : totalBeforeBtw;
  const btw = btwBase * 0.09;
  const total = totalBeforeBtw;

  const summary = {
    subtotal: parseFloat(subtotal.toFixed(2)),
    packaging: parseFloat(packagingTotal.toFixed(2)),
    delivery: parseFloat(deliveryCost.toFixed(2)),
    discountType,
    discountValue: parseFloat(discountVal.toFixed(2)),
    discountAmount: parseFloat(discount.toFixed(2)),
    btw: parseFloat(btw.toFixed(2)),
    total: parseFloat(total.toFixed(2))
  };

  const orderType = delivery ? 'bezorgen' : 'afhalen';
  const payload = {
    orderType,
    name,
    phone,
    email: '',
    customerEmail: '',
    pickup_time: !delivery ? document.getElementById('pickup_time').value : '',
    delivery_time: delivery ? document.getElementById('delivery_time').value : '',
    paymentMethod: delivery
      ? document.getElementById('deliveryPayment').value
      : document.getElementById('pickupPayment').value,
    postcode: delivery ? document.getElementById('postcode').value.trim() : '',
    house_number: delivery ? document.getElementById('houseNumber').value.trim() : '',
    street: delivery ? document.getElementById('street').value.trim() : '',
    city: delivery ? document.getElementById('city').value.trim() : '',
    order_number: orderNumber,
    items: itemsToSend,
    message: orderText,
    opmerking: remark,
    totaal: total.toFixed(2),

    summary  // âœ… åŠ å…¥ç»“è´¦æ˜ç»†
  };

  // âœ… æäº¤åˆ°åç«¯
  fetch('https://flask-order-api.onrender.com/submit_order', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  })
    .then(r => r.json())
    .then(res => {
      if (res.success || res.status === 'ok') {
        alert('Bestelling succesvol verzonden! Bestelnummer: ' + orderNumber);
        clearForm();
        fetchOrders();
      } else {
        alert('Er is een fout opgetreden bij het verzenden van uw bestelling. Probeer het opnieuw.');
      }
    })
    .catch(() => alert('Verzendfout â€“ server niet bereikbaar.'));
}




  // âœ… æäº¤åˆ°è¿œç¨‹ Flask Render åç«¯

  function pad(num){
    return num.toString().padStart(2,'0');
  }

  function populateTimeOptions(selectId,offsetMinutes){
    const select=document.getElementById(selectId);
    if(!select) return;
    select.innerHTML='';
    const now=new Date();
    now.setMinutes(now.getMinutes()+offsetMinutes);

    const open=new Date();
    open.setHours(12,0,0,0);
    const close=new Date();
    close.setHours(23,59,0,0);

    let start=now>open?now:open;
    start=new Date(start);
    start.setMinutes(Math.ceil(start.getMinutes()/15)*15,0,0);

    for(let t=start;t<=close;t.setMinutes(t.getMinutes()+15)){
      const hh=pad(t.getHours());
      const mm=pad(t.getMinutes());
      const timeStr=`${hh}:${mm}`;
      const opt=document.createElement('option');
      opt.value=timeStr;
      opt.textContent=timeStr;
      select.appendChild(opt);
    }
  }


</script>

<script>
function formatCurrency(value){
  if (typeof value === 'string') {
    value = value.replace('â‚¬', '').replace(',', '.').trim();
  }
  const num = parseFloat(value);
  return isNaN(num) ? "â‚¬0.00" : `â‚¬${num.toFixed(2)}`;
}
</script>

  
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
  const socketUrl = (window.env && window.env.SOCKET_URL) ? window.env.SOCKET_URL : 'https://flask-order-api.onrender.com';
  const socket = io(socketUrl, { transports: ['websocket'] });

  function applyMenuPrices(items){
    const map={};
    items.forEach(i=>{map[i.name]=i.price;});
    document.querySelectorAll('.menu-item').forEach(el=>{
      const name=el.dataset.name;
      if(name&&map[name]!==undefined){
        const p=parseFloat(map[name]);
        el.dataset.price=p;
        const pe=el.querySelector('p');
        if(pe) pe.textContent=`â‚¬${p.toFixed(2)}`;
      }
    });
  }

  function populateBubbleSelectors(){
    const baseSel=document.getElementById('bubbleType');
    const flavorSel=document.getElementById('bubbleFlavor');
    const toppingSel=document.getElementById('bubbleTopping');
    const curBase=baseSel.value,curFlavor=flavorSel.value,curTopping=toppingSel.value;
    baseSel.innerHTML='<option value="">Base</option>';
    bubbleOptions.base.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curBase) opt.selected=true;baseSel.appendChild(opt);});
    flavorSel.innerHTML='<option value="">Smaak</option>';
    bubbleOptions.smaak.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curFlavor) opt.selected=true;flavorSel.appendChild(opt);});
    toppingSel.innerHTML='<option value="">Topping</option>';
    bubbleOptions.topping.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curTopping) opt.selected=true;toppingSel.appendChild(opt);});
  }

  function populateXbentoSelectors(){
    const mainSel=document.getElementById('xBentoMain');
    const sideSel=document.getElementById('xBentoSide');
    const riceSel=document.getElementById('xBentoRice');
    const vegSel=document.getElementById('xBentoVeg');
    const curMain=mainSel.value,curSide=sideSel.value,curRice=riceSel.value,curVeg=vegSel.value;
    mainSel.innerHTML='<option value="">Hoofdgerecht</option>';
    xbentoOptions.main.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curMain) opt.selected=true;mainSel.appendChild(opt);});
    sideSel.innerHTML='<option value="">Bijgerecht</option>';
    xbentoOptions.side.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curSide) opt.selected=true;sideSel.appendChild(opt);});
    riceSel.innerHTML='<option value="">Rijstsoort</option>';
    xbentoOptions.rice.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curRice) opt.selected=true;riceSel.appendChild(opt);});
    vegSel.innerHTML='<option value="">Groente</option>';
    xbentoOptions.groente.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curVeg) opt.selected=true;vegSel.appendChild(opt);});
  }

  function updateBubbleCartPrices(){
    Object.entries(cart).forEach(([name,item])=>{
      const m=name.match(/^Bubble Tea \(([^,]+), ([^,]+), ([^)]+)\)$/);
      if(!m) return;
      const price=getOptionPrice('base',m[1])+getOptionPrice('smaak',m[2])+getOptionPrice('topping',m[3]);
      item.price=price;
    });
    updateCart();
  }

  function updateXbentoCartPrices(){
    Object.entries(cart).forEach(([name,item])=>{
      const m=name.match(/^Xbento \(([^,]+), ([^,]+), ([^,]+), ([^)]+)\)$/);
      if(!m) return;
      const price=getXbentoOptionPrice('main',m[1])+getXbentoOptionPrice('side',m[2])+getXbentoOptionPrice('rice',m[3])+getXbentoOptionPrice('groente',m[4]);
      item.price=price;
    });
    updateCart();
  }

  function fetchBubbleOptions(){
    fetch('/api/bubble_options').then(r=>r.json()).then(data=>{
      bubbleOptions=data;
      populateBubbleSelectors();
      updateMilkTeaDisplay();
      updateBubbleCartPrices();
    });
  }

  function fetchXbentoOptions(){
    fetch('/api/xbento_options').then(r=>r.json()).then(data=>{
      xbentoOptions=data;
      populateXbentoSelectors();
      updateXbentoDisplay();
      updateXbentoCartPrices();
    });
  }
  async function loadMenu(){
    const r=await fetch('/api/menu');
    if(r.ok){ const d=await r.json(); applyMenuPrices(d); }
  }
  loadMenu();
  fetch('/api/settings').then(r=>r.json()).then(s=>{
    if(s.milktea_price){ milkTeaPrice=parseFloat(s.milktea_price); updateMilkTeaDisplay(); }
    applyCrispyPrices(s);
  });
  fetchBubbleOptions();
  fetchXbentoOptions();
  socket.on('menu_update', applyMenuPrices);
  socket.on('milktea_price_update', data => {
    milkTeaPrice = parseFloat(data.price || data);
    updateMilkTeaDisplay();
  });
  socket.on('bubble_options_update', data => {
    bubbleOptions=data;
    populateBubbleSelectors();
    updateMilkTeaDisplay();
    updateBubbleCartPrices();
  });
  socket.on('xbento_options_update', data => {
    xbentoOptions=data;
    populateXbentoSelectors();
    updateXbentoDisplay();
    updateXbentoCartPrices();
  });
  socket.on('crispy_price_update', data => {
    applyCrispyPrices(data);
  });

  let pollTimer;
  const baseTitle = document.title;
  let newOrderCount = 0; // unseen orders for title
  let hasNewOrder = false;
  function updateTabTitle(){
    document.title = newOrderCount ? `${baseTitle} (${newOrderCount})` : baseTitle;
  }
  function getOrderCount(){
    const tbody = document.querySelector('.orders-panel tbody');
    return tbody ? tbody.children.length : 0;
  }
  function updateTodayBadge(){
    const count = getOrderCount();
    document.querySelectorAll('.today-badge').forEach(badge => {
      badge.textContent = hasNewOrder ? 'New' : count;
    });
  }

  // éŸ³æ•ˆæ’­æ”¾
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  function beep() {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = 'sine';
    osc.frequency.setValueAtTime(660, audioCtx.currentTime);
    gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.2);
  }

  function parseTimeToMinutes(str){
    if(!str) return Infinity;
    const parts = str.split(':');
    const h = parseInt(parts[0],10);
    const m = parseInt(parts[1],10);
    if(isNaN(h) || isNaN(m)) return Infinity;
    return h*60+m;
  }

  function getSortKey(order){
    const isDelivery = ['delivery','bezorgen'].includes(order.order_type);
    const t = isDelivery ? (order.delivery_time || order.deliveryTime)
                         : (order.pickup_time || order.pickupTime);
    return parseTimeToMinutes(t);
  }

  function insertSorted(tbody, tr){
    const val = parseFloat(tr.dataset.sortKey);
    const rows = Array.from(tbody.querySelectorAll('tr'));
    for(const row of rows){
      if(parseFloat(row.dataset.sortKey) > val){
        tbody.insertBefore(tr, row);
        return;
      }
    }
    tbody.appendChild(tr);
  }

  // æ·»åŠ è®¢å•åˆ°è¡¨æ ¼
  function addRow(order, highlight=false) {
    const tbody = document.querySelector('.orders-panel tbody');
    if (!tbody) return;

    const tr = document.createElement('tr');
    if (order.id) tr.dataset.id = order.id;
    tr.dataset.order = JSON.stringify(order);
    if(order.is_cancelled) tr.classList.add('cancelled');
    else if(order.is_completed) tr.classList.add('completed');
    const isDelivery = ['delivery', 'bezorgen'].includes(order.order_type);
    const items = Object.entries(order.items || {}).map(([n, i]) => `<li>${n} x ${i.qty}</li>`).join('');
    let fooi = parseFloat(order.fooi ?? order.tip);
    if (isNaN(fooi)) {
      fooi = 0;
    }
    if(!('totaal' in order)){
      console.warn('âš ï¸ totaal å­—æ®µç¼ºå¤±ï¼Œè¯·è”ç³»åç«¯');
    }
    const remark = order.opmerking || order.remark || '';
    const pickup = order.pickup_time || order.pickupTime;
    const delivery = order.delivery_time || order.deliveryTime;

    let time = order.created_at || '';
    if (time && time.length > 5) {
      if (time.includes('T')) {
        const d = new Date(time);
        if (!isNaN(d)) time = `${pad(d.getHours())}:${pad(d.getMinutes())}`;
      } else if (time.includes(' ')) {
        time = time.split(' ')[1].slice(0,5);
      }
    }

      tr.innerHTML = `
        <td>${order.created_date || ''}</td>
        <td>${time}</td>
        <td>${isDelivery ? 'Bezorgen' : 'Afhalen'}</td>
        <td>${order.customer_name || ''}</td>
        <td>${order.phone || ''}</td>
        <td>${order.email || '-'}</td>
        <td><ul>${items}</ul></td>
        <td>${remark || '-'}</td>
        <td>â‚¬${parseFloat(fooi).toFixed(2)}</td>
        <td>â‚¬${parseFloat(order.totaal).toFixed(2)}</td>
        <td>${isDelivery ? `${order.street} ${order.house_number} ${order.postcode} ${order.city}${order.maps_link ? ` <a href="${order.maps_link}" target="_blank">ğŸ“Maps</a>` : ''}` : '-'}</td>
        <td>${isDelivery ? (delivery || '-') : (pickup || '-')}</td>
        <td>${order.payment_method || ''}</td>
        <td>${order.order_number || '-'}</td>
        <td><button onclick="toggleComplete(this)"
          data-number="${order.order_number}"
          data-name="${order.customer_name || ''}"
          data-phone="${order.phone || ''}"
          data-email="${order.email || ''}"
          data-type="${isDelivery ? 'bezorg' : 'afhaal'}">${order.is_completed ? 'Undone' : 'Klaar'}</button>
          <button onclick="editOrder(this)">Bewerk</button>
          <button onclick="cancelOrder(this)">Annuleer</button>
          <span class="notify"></span></td>`;
      
    tr.dataset.sortKey = getSortKey(order);
    if(highlight){
      tr.classList.add('new-order');
      setTimeout(()=>tr.classList.remove('new-order'),10000);
    }
    insertSorted(tbody, tr);
    updateTodayBadge();
    return tr;
  }

  // Socket ç›‘å¬æ–°è®¢å•
  socket.on('new_order', order => {
  console.log('ğŸ†• Nieuwe bestelling ontvangen!', order);
  beep();
  hasNewOrder = true;
  const row = addRow(order, true);
  updateTodayBadge();
  newOrderCount++;
  updateTabTitle();
  if(confirm('Nieuwe bestelling ontvangen!')){
    showTodayOrders();
    if(row) row.scrollIntoView({behavior:'smooth', block:'center'});
    hasNewOrder = false;
    updateTodayBadge();
  }
});

  // æ–­çº¿åå¯ç”¨è½®è¯¢
  socket.on('disconnect', () => {
    console.warn('âš ï¸ Socket verbroken â€“ schakel over op polling');
    startPolling();
  });

  socket.on('connect', () => {
    console.log('âœ… Socket verbonden');
    stopPolling();
  });

  socket.on('connect_error', () => {
    setTimeout(() => socket.connect(), 1000);
  });

  // è½®è¯¢ä½œä¸ºå¤‡ä»½
  function fetchOrders() {
  fetch('/pos/orders_today?json=1')
    .then(r => r.json())
    .then(data => {
      const tbody = document.querySelector('.orders-panel tbody');
      if (!tbody) return;
      tbody.innerHTML = '';
      data.sort((a,b)=>getSortKey(a)-getSortKey(b)).forEach(o=>addRow(o));
      updateTodayBadge();
    }).catch(() => {});
 }


  function startPolling() {
    if (pollTimer) return;
    fetchOrders();
    pollTimer = setInterval(fetchOrders, 10000); // æ¯10ç§’
  }

  function stopPolling() {
    if (pollTimer) {
      clearInterval(pollTimer);
      pollTimer = null;
    }
  }

  const xbowlModal=document.getElementById('xBowlAddedModal');
  const againBtn=document.getElementById('xBowlAgain');
  const closeXBowlBtn=document.getElementById('xBowlClose');
  function showXBowlModal(){ if(xbowlModal) xbowlModal.style.display='flex'; }
  function hideXBowlModal(){ if(xbowlModal) xbowlModal.style.display='none'; }
  if(againBtn){ againBtn.addEventListener('click',()=>{ clearXBowlSet(); hideXBowlModal(); }); }
  if(closeXBowlBtn){ closeXBowlBtn.addEventListener('click', hideXBowlModal); }

  window.addEventListener('beforeunload', () => socket.disconnect());
  window.addEventListener('focus', () => { newOrderCount = 0; hasNewOrder = false; updateTabTitle(); updateTodayBadge(); });
</script>



 
  
</body></html>